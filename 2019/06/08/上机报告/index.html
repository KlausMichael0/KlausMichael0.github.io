<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">





















  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext">
  






<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="记录java上机作业的程序结果及分析。">
<meta name="keywords" content="Java">
<meta property="og:type" content="article">
<meta property="og:title" content="Java程序基础练习">
<meta property="og:url" content="http://yoursite.com/2019/06/08/上机报告/index.html">
<meta property="og:site_name" content="Klaus&#39; Blog">
<meta property="og:description" content="记录java上机作业的程序结果及分析。">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/de970a1300c66e2a89491acb22bd09c6.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/266e9f54e51e2eb4e1e379d7bb63b31b.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/2dee628eeaa236c7c26fa3494f6cf7dd.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/f6e170df8f5fc1d003c2c7e82cfa84fc.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/d9f269bd9565e13a33b27cc183fcfdf9.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/f3bd566b2734de8e6bb69056557cfd6c.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/268bab3104e25c77d5a5614ad8eda237.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/b60843c2a1071331b1e3bb596607a8a5.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/c04039ca7aad37dd3ad0cfb0e7f424d9.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/c12bb1451914251d7e3b23f0979c1cef.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/9750d1bc8280bfcb31018e18010f11f3.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/13/2ede7c2b7ff558dbf0fff219c45f956b.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/13/bb41190bb0b7b9dfe981f11d559ac856.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/00049204191994f8ff327aea4c16e83b.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/05f84f710bc4a1c016cafd241f832279.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/782545109c61acbeac236355b62ad443.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/96834750a169cb5bd586fc603eb3e248.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/90c2ddeb30fd9903aad7c979d814125d.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/ebf3274ac71507980ca19705a49134d9.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/d6e5411193bf2f0cf58790b230b171e1.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/2395fdb6af0f78d1de8f9901add660ca.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/721511c72271b44667b5b8645b10797a.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/64c408212082cb62cd74d5d2001812a2.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/d85eba62f0abbb088c85fefd1994b2fd.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/14/57bb7de9f78b1f1231d01e167c49201f.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/65c1fa92103458d9ec68563a855be81b.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/719ba686a5e5ba5cba5dac22f33a0c90.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/d1cf8d5e4fef5f23f54f213de48e9112.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/97191f08ff97c8d7a74c152ff5b7d34e.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/0981afd132e6a0fc79efdd23f2cd62fe.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/196089b5f72d066fbc26f54d2cf00377.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/37d2bd665c68a1e656c01832c6fd1c6b.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/4066a0bf66af034c39a94e0e82908937.png">
<meta property="og:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/c02b6a1aece8cfa06bdb37edd3a462d7.png">
<meta property="og:updated_time" content="2019-06-13T16:35:16.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java程序基础练习">
<meta name="twitter:description" content="记录java上机作业的程序结果及分析。">
<meta name="twitter:image" content="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/de970a1300c66e2a89491acb22bd09c6.png">






  <link rel="canonical" href="http://yoursite.com/2019/06/08/上机报告/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Java程序基础练习 | Klaus' Blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Klaus' Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/08/上机报告/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Klaus">
      <meta itemprop="description" content="Tough time don't last, tough people do.">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Klaus' Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java程序基础练习

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2019-06-08 22:31:26" itemprop="dateCreated datePublished" datetime="2019-06-08T22:31:26+08:00">2019-06-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-06-14 00:35:16" itemprop="dateModified" datetime="2019-06-14T00:35:16+08:00">2019-06-14</time>
              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>记录java上机作业的程序结果及分析。</p>
<a id="more"></a>
<h2 id="上机报告"><a href="#上机报告" class="headerlink" title="上机报告"></a>上机报告</h2><h3 id="第一次上机"><a href="#第一次上机" class="headerlink" title="第一次上机"></a>第一次上机</h3><h4 id="1-3"><a href="#1-3" class="headerlink" title="1.3"></a>1.3</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>使用冒泡排序编写一个对整形数组进行排序的方法，使用二分查找法找到数组（已排好序）中的特定元素。</p>
</blockquote>
</li>
<li><p>代码如下：</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bublling</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">int</span>[] first = &#123;<span class="number">23</span>, <span class="number">12</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">14</span>&#125;; </span><br><span class="line">		<span class="keyword">int</span>[] res = bubling(first);</span><br><span class="line"></span><br><span class="line">		System.out.print(<span class="string">"排序之前的数组为："</span>);</span><br><span class="line">		System.out.println();</span><br><span class="line">		print(first);</span><br><span class="line">		System.out.println();</span><br><span class="line">		System.out.println(<span class="string">"排序后的数组为："</span>);</span><br><span class="line">		print(res);</span><br><span class="line">		</span><br><span class="line">		System.out.println();</span><br><span class="line">		System.out.println(<span class="string">"输入想要查找的元素："</span>);</span><br><span class="line">		Scanner in = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		<span class="keyword">int</span> number = in.nextInt();</span><br><span class="line">		<span class="keyword">int</span> target = binarySearch(first, number);</span><br><span class="line">		ifExist(target);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">int</span>[] list)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> num : list)</span><br><span class="line">		&#123;</span><br><span class="line">			System.out.print(num + <span class="string">" "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] bubling(<span class="keyword">int</span> list[]) &#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i =<span class="number">0</span>; i &lt; list.length-<span class="number">1</span>; i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j &lt; list.length-<span class="number">1</span>-i; j++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(list[j] &gt; list[j+<span class="number">1</span>])</span><br><span class="line">				&#123;</span><br><span class="line">					<span class="keyword">int</span> temp = list[j];</span><br><span class="line">					list[j] = list[j+<span class="number">1</span>];</span><br><span class="line">					list[j+<span class="number">1</span>] = temp;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">int</span> result[] = <span class="keyword">new</span> <span class="keyword">int</span>[list.length];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;list.length; i++) &#123;</span><br><span class="line">			result[i]=list[i];</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span> result;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">binarySearch</span><span class="params">(<span class="keyword">int</span> list[], <span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> low = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> high = list.length -<span class="number">1</span>;</span><br><span class="line">		<span class="keyword">while</span>(high &gt;= low) &#123;</span><br><span class="line">			<span class="keyword">int</span> mid = (low + high) / <span class="number">2</span>;</span><br><span class="line">			<span class="keyword">if</span>(key &lt; list[mid])</span><br><span class="line">				high = mid -<span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span> <span class="keyword">if</span>(key &gt; list[mid])</span><br><span class="line">				low = mid + <span class="number">1</span>;</span><br><span class="line">			<span class="keyword">else</span></span><br><span class="line">				<span class="keyword">return</span> mid;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> -<span class="number">1</span>;	</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ifExist</span><span class="params">(<span class="keyword">int</span> result)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(result &gt;= <span class="number">0</span>)</span><br><span class="line">			System.out.println(<span class="string">"所选元素的下标为："</span> + result);</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			System.out.println(<span class="string">"所选元素不存在"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/de970a1300c66e2a89491acb22bd09c6.png" alt="1.png"></p>
<ul>
<li>设计思路<ul>
<li>定义要排序的整型数组</li>
<li>定义冒泡排序的<code>bubling()</code>方法<ul>
<li>传入参数为数组</li>
<li>利用嵌套循环，第一次循环，判断每个相邻的两个数组元素的大小，如果前方的元素大于后方的元素，则交换两者的位置，要比较n-1次；第二次循环，位于最后面的元素不用再参与比较，一共要比较n-2次…..第n-1次循环，比较1次</li>
<li>返回经过冒泡排序的数组，数组元素从小到大排序</li>
</ul>
</li>
<li>定义二分查找法<code>binarySearch()</code><ul>
<li>传入参数为数组和指定元素</li>
<li>定义头尾点位，定义中间的元素的数组小标</li>
<li>将指定元素与中间的元素相比较<ul>
<li>如果指定元素大于中间的元素，则将头点位设置为中间元素的数组下标，再次进行判断</li>
<li>如果指定元素小于中间的元素，则将尾点位设置为中间元素的数组下标，再次进行判断</li>
</ul>
</li>
<li>如果中间元素的值等于指定元素，则返回中间元素的数组下标</li>
<li>如果找不到指定元素，则返回-1</li>
</ul>
</li>
<li>定义主函数</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>一开始的时候冒泡排序的内外循环的循环次序没有思考清楚，导致报错，仔细检查之后便解决了。</li>
</ul>
</li>
</ul>
<h4 id="1-4"><a href="#1-4" class="headerlink" title="1.4"></a>1.4</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>多维数组的定义与使用：随机定义一定个数的空间点（x,y,z），编写程序找出距离最近的点对。</p>
</blockquote>
</li>
<li><p>代码如下</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShortestDis</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"输入空间点的个数，然后每行输入每个点的坐标"</span>);</span><br><span class="line">		<span class="keyword">double</span>[][] points = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">100</span>][<span class="number">3</span>];</span><br><span class="line">		Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		<span class="keyword">int</span> number = input.nextInt();</span><br><span class="line">		<span class="keyword">int</span> h = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span>(number != h) &#123;</span><br><span class="line">			points[h][<span class="number">0</span>] = input.nextDouble();</span><br><span class="line">			points[h][<span class="number">1</span>] = input.nextDouble();</span><br><span class="line">			points[h][<span class="number">2</span>] = input.nextDouble();</span><br><span class="line">			h++;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">        <span class="comment">//n个点一共有1+2+...+（n-1）个距离值，和为n*(n-1)/2</span></span><br><span class="line">		<span class="keyword">int</span> arr=number*(number-<span class="number">1</span>)/<span class="number">2</span>;</span><br><span class="line">		<span class="keyword">double</span>[] result=<span class="keyword">new</span> <span class="keyword">double</span>[arr];</span><br><span class="line">        <span class="keyword">int</span>[] x=<span class="keyword">new</span> <span class="keyword">int</span>[arr];</span><br><span class="line">        <span class="keyword">int</span>[] y=<span class="keyword">new</span> <span class="keyword">int</span>[arr];</span><br><span class="line">        <span class="keyword">int</span> index=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span>[] minIndex=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">100</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;number-<span class="number">1</span>;i++)</span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> j=i+<span class="number">1</span>;j&lt;number;j++)&#123;</span><br><span class="line">        	 result[index]= compute(points[i],points[j]);</span><br><span class="line">        	 x[index]=i;</span><br><span class="line">        	 y[index]=j;</span><br><span class="line">        	 index++;</span><br><span class="line">         &#125;</span><br><span class="line">        minIndex=getmin(result);</span><br><span class="line">        System.out.println(<span class="string">"共有"</span>+minIndex[<span class="number">0</span>]+<span class="string">"组点距离最小且相同"</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">0</span>;k&lt;minIndex[<span class="number">0</span>];k++)&#123;</span><br><span class="line">        System.out.print(<span class="string">"第"</span>+(k+<span class="number">1</span>)+<span class="string">"组的两点为：("</span>+points[x[minIndex[k+<span class="number">1</span>]]][<span class="number">0</span>]+<span class="string">","</span>+points[x[minIndex[k+<span class="number">1</span>]]][<span class="number">1</span>]+<span class="string">","</span>+points[x[minIndex[k+<span class="number">1</span>]]][<span class="number">2</span>]+<span class="string">")"</span>);</span><br><span class="line">        System.out.println(<span class="string">"和 ("</span>+points[y[minIndex[k+<span class="number">1</span>]]][<span class="number">0</span>]+<span class="string">","</span>+points[y[minIndex[k+<span class="number">1</span>]]][<span class="number">1</span>]+<span class="string">","</span>+points[y[minIndex[k+<span class="number">1</span>]]][<span class="number">2</span>]+<span class="string">")"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	&#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">compute</span><span class="params">(<span class="keyword">double</span>[] a,<span class="keyword">double</span>[] b)</span></span>&#123;</span><br><span class="line">        	<span class="keyword">double</span>[] c=<span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">3</span>];</span><br><span class="line">        	c[<span class="number">0</span>]=Math.pow(a[<span class="number">0</span>]-b[<span class="number">0</span>],<span class="number">2</span>);</span><br><span class="line">            c[<span class="number">1</span>]=Math.pow(a[<span class="number">1</span>]-b[<span class="number">1</span>],<span class="number">2</span>);</span><br><span class="line">        	c[<span class="number">2</span>]=Math.pow(a[<span class="number">2</span>]-b[<span class="number">2</span>],<span class="number">2</span>);</span><br><span class="line">        	c[<span class="number">0</span>]=Math.sqrt(c[<span class="number">0</span>]+c[<span class="number">1</span>]+c[<span class="number">2</span>]);</span><br><span class="line">        	<span class="keyword">return</span> c[<span class="number">0</span>];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[] getmin(<span class="keyword">double</span>[] a)&#123;</span><br><span class="line">        	<span class="keyword">int</span>[] n=<span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">100</span>];</span><br><span class="line">        	n[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        	<span class="keyword">double</span> min=a[<span class="number">0</span>];</span><br><span class="line">        	<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;a.length;i++)&#123;</span><br><span class="line">        		<span class="keyword">if</span>(a[i]==min)&#123;</span><br><span class="line">        			n[n[<span class="number">0</span>]+<span class="number">1</span>]=i;</span><br><span class="line">        		    n[<span class="number">0</span>]++;</span><br><span class="line">        		&#125;<span class="keyword">else</span> <span class="keyword">if</span>(a[i]&lt;min)&#123;</span><br><span class="line">        			n[<span class="number">0</span>]=<span class="number">1</span>;</span><br><span class="line">        			n[<span class="number">1</span>]=i;</span><br><span class="line">        			min=a[i];</span><br><span class="line">               &#125;</span><br><span class="line">        	&#125;</span><br><span class="line">        	<span class="keyword">return</span> n;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/266e9f54e51e2eb4e1e379d7bb63b31b.png" alt="2.png"></p>
<ul>
<li><p>设计思路</p>
<ul>
<li>定义计算两点之间的距离的方法<ul>
<li>利用<code>Math</code>模块计算两点之间的距离，返回距离值（double类型）</li>
</ul>
</li>
<li>判断有几组点的距离是相同的<ul>
<li>n[0]存储组数，n[1]及以后存储的是相同的距离的数值</li>
</ul>
</li>
<li>主函数<ul>
<li>接收用户输入：空间点数、每个点的坐标</li>
<li>用一个二维数组来存储各个点的坐标，定义一个数组存储每个点的距离。</li>
<li>用for循环判断最小的距离</li>
<li>判断有几组的最小距离是相同的</li>
<li>打印结果</li>
</ul>
</li>
</ul>
</li>
<li><p>遇到的问题</p>
<ul>
<li>在选择出有几组点的最小距离是最小的时算法写的有问题，理清了头绪之后写对了，即<code>getmin()</code>方法</li>
</ul>
</li>
</ul>
<h4 id="1-5"><a href="#1-5" class="headerlink" title="1.5"></a>1.5</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>随机定义两个二维数组，构成两个矩阵，编写两个矩阵相乘的方法。</p>
</blockquote>
</li>
<li><p>代码如下</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FifthOfOne</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">int</span>[][] a=&#123;&#123;<span class="number">1</span>,<span class="number">2</span>&#125;,&#123;<span class="number">3</span>,<span class="number">4</span>&#125;,&#123;<span class="number">5</span>,<span class="number">6</span>&#125;&#125;;</span><br><span class="line">		<span class="keyword">int</span>[][] b=&#123;&#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;,&#123;<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>&#125;&#125;;</span><br><span class="line">		printMatrix(a,b);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">printMatrix</span><span class="params">(<span class="keyword">int</span>[][] a,<span class="keyword">int</span>[][] b)</span></span>&#123;</span><br><span class="line">		<span class="keyword">int</span> c[][] = <span class="keyword">new</span> <span class="keyword">int</span>[a.length][b[<span class="number">0</span>].length];</span><br><span class="line">		<span class="keyword">int</span> x,i,j;</span><br><span class="line">		<span class="keyword">for</span>(i = <span class="number">0</span>;i&lt;a.length ;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span>(j = <span class="number">0</span>;j&lt;b[<span class="number">0</span>].length;j++)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">int</span> temp = <span class="number">0</span>;</span><br><span class="line">				<span class="keyword">for</span>(x = <span class="number">0</span>;x&lt;b.length;x++)</span><br><span class="line">				&#123;</span><br><span class="line">					temp+=a[i][x]*b[x][j];	</span><br><span class="line">				&#125;</span><br><span class="line">				c[i][j] = temp;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		System.out.println(<span class="string">"矩阵相乘后结果为："</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> m = <span class="number">0</span>;m&lt;a.length;m++)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> n = <span class="number">0</span>;n&lt;b[<span class="number">0</span>].length;n++)</span><br><span class="line">			&#123;</span><br><span class="line">				System.out.print(c[m][n]+<span class="string">"\t"</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/2dee628eeaa236c7c26fa3494f6cf7dd.png" alt="3.png"></p>
<ul>
<li>设计思路<ul>
<li>利用二维数组自定义矩阵</li>
<li>定义矩阵相乘的<code>printMatrix()</code>方法<ul>
<li>传入的参数为两个矩阵</li>
<li>矩阵A和矩阵B相乘，是A的行与每一列相乘<ul>
<li>利用嵌套循环，外循环为行，内循环为列</li>
<li>得到新的二维数组，即新的矩阵</li>
<li>打印出结果</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>无</li>
</ul>
</li>
</ul>
<h4 id="1-7"><a href="#1-7" class="headerlink" title="1.7"></a>1.7</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>定义两个数组A和B，B数组中的元素包含在A数组中，请写一段代码把A数组中B没有的元素放到C数组中，假如数组中都是数字，而且已经按大小排序，请写一段代码最快效率把上面的元素放到C数组中。</p>
</blockquote>
</li>
<li><p>代码如下</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SeventhOfOne</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		Integer[] arr1 = <span class="keyword">new</span> Integer[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span> &#125;;</span><br><span class="line">		Integer[] arr2 = <span class="keyword">new</span> Integer[] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span> &#125;;</span><br><span class="line">		Integer[] arr3 = substract(arr1, arr2);</span><br><span class="line">		System.out.println(<span class="string">"求差集的结果如下："</span>);   </span><br><span class="line">        <span class="keyword">for</span> (Integer str:arr3) &#123;   </span><br><span class="line">            System.out.println(str);   </span><br><span class="line">        &#125;	</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> Integer[] substract(Integer[] arr1, Integer[] arr2) &#123;   </span><br><span class="line">        LinkedList&lt;Integer&gt; list = <span class="keyword">new</span> LinkedList&lt;Integer&gt;();  <span class="comment">//LinkedLIist是List接口的实现类，可以高速插入和删除 </span></span><br><span class="line">        <span class="keyword">for</span> (Integer str : arr1) &#123;   </span><br><span class="line">            <span class="keyword">if</span>(!list.contains(str)) &#123;   </span><br><span class="line">                list.add(str);   </span><br><span class="line">            &#125;   </span><br><span class="line">        &#125;   </span><br><span class="line">        <span class="keyword">for</span> (Integer str : arr2) &#123;   </span><br><span class="line">            <span class="keyword">if</span> (list.contains(str)) &#123;   </span><br><span class="line">                list.remove(str);   </span><br><span class="line">            &#125; </span><br><span class="line">        &#125;   </span><br><span class="line">        Integer[] result = &#123;&#125;;   </span><br><span class="line">        <span class="keyword">return</span> list.toArray(result);   </span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/f6e170df8f5fc1d003c2c7e82cfa84fc.png" alt="4.png"></p>
<ul>
<li>设计思路<ul>
<li>定义求差集的<code>substract()</code>方法<ul>
<li>传入的参数是两个<code>Integer[]</code>类型的数组，即这两个集合</li>
<li>新建一个<code>LinkedList&lt;Integer&gt;</code>的实例，这是<code>List</code>接口的实现类，可以高速插入和删除</li>
<li>利用for循环，直接调用<code>List</code>中包含的<code>contains()</code>、<code>add()</code>和<code>remove()</code>方法</li>
<li>最后的差集转换为数组返回</li>
</ul>
</li>
<li>主函数<ul>
<li>自定义两个数组表示集合（已经排好序），其中arr2[]是arr1[]的子集</li>
<li>调用上述定义的方法，打印出结果</li>
</ul>
</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>关键是快速的问题，上网查询发现LIst自带的方法不错，但是对于类型的转换通过查才得知</li>
</ul>
</li>
</ul>
<h3 id="第二次上机"><a href="#第二次上机" class="headerlink" title="第二次上机"></a>第二次上机</h3><h4 id="2-3"><a href="#2-3" class="headerlink" title="2.3"></a>2.3</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>在一个正n边形中，所有边的长度相等，所有角的角数都相等。创建一个名为RegularPolygon的类，该类包括：</p>
<p>（1） 一个名为n的int型私有数据域定义多边形的边数，默认值为3；</p>
<p>（2） 一个名为side的double型私有数据域存储边的长度，默认值为1；</p>
<p>（3） 一个名为x的double型私有数据域定义多边形中点的x坐标，默认值为0；</p>
<p>（4） 一个名为y的double型私有数据域定义多边形中点的y坐标，默认值为0；</p>
<p>（5） 一个创建带默认值的正多边形的无参构造方法</p>
<p>（6） 一个能创建带指定边数和边长度、中心在(0,0)的正多边形的构造方法</p>
<p>（7） 一个能创建带指定边数和边长度、中心在(x,y)的正多边形的构造方法</p>
<p>（8） 所有数据域的访问器和修改器</p>
<p>（9） 一个返回多边形周长的方法getPerimeter()；</p>
<p>（10） 一个返回多边形面积的方法getArea(); 面积=（n<em>s2）/ [4</em> tan(pi/n)]</p>
</blockquote>
</li>
<li><p>代码如下</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Challage2;</span><br><span class="line"><span class="keyword">import</span> java.math.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegularPolygon</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		System.out.print(triangle());</span><br><span class="line">		System.out.print(assign(<span class="number">5</span>,<span class="number">4</span>));</span><br><span class="line">		System.out.print(assignAndPoint(<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>));</span><br><span class="line">		</span><br><span class="line">		triangle();</span><br><span class="line">		System.out.println(<span class="string">"周长为："</span> + getPerimeter());</span><br><span class="line">		System.out.println(<span class="string">"面积为："</span> + getArea());</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> n = <span class="number">3</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> side = <span class="number">1</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> x = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">double</span> y = <span class="number">0</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//带默认值的正多边形</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">triangle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		n = <span class="number">3</span>;</span><br><span class="line">		side = <span class="number">1</span>;</span><br><span class="line">		x = <span class="number">0</span>;</span><br><span class="line">		y = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"边数："</span>+ n+ <span class="string">"\n"</span> + <span class="string">"边的长度："</span> + side + <span class="string">"\n"</span> + <span class="string">"中点坐标：("</span> + x + <span class="string">","</span> + y +<span class="string">")"</span> + <span class="string">"\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//指定边数和长度</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">assign</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">		n = a;</span><br><span class="line">		side = b;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"边数："</span>+ a+ <span class="string">"\n"</span> + <span class="string">"边的长度："</span> + b + <span class="string">"\n"</span> + <span class="string">"中点坐标：("</span> + x + <span class="string">","</span> + y +<span class="string">")"</span> + <span class="string">"\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//指定边数、长度以及中心点</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">assignAndPoint</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, <span class="keyword">double</span> c, <span class="keyword">double</span> d)</span> </span>&#123;</span><br><span class="line">		n = a;</span><br><span class="line">		side = b;</span><br><span class="line">		x = c;</span><br><span class="line">		y = d;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">"边数："</span>+ a+ <span class="string">"\n"</span> + <span class="string">"边的长度："</span> + b + <span class="string">"\n"</span> + <span class="string">"中点坐标：("</span> + c + <span class="string">","</span> + d +<span class="string">")"</span> + <span class="string">"\n"</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//访问器</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getEages</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> n;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getSides</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> side;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getX</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> x;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getY</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> y;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//修改器</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setEages</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">		n = a;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSides</span><span class="params">(<span class="keyword">double</span> b)</span> </span>&#123;</span><br><span class="line">		side = b;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setX</span><span class="params">(<span class="keyword">double</span> c)</span> </span>&#123;</span><br><span class="line">		x = c;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setY</span><span class="params">(<span class="keyword">double</span> d)</span> </span>&#123;</span><br><span class="line">		y = d;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//返回周长</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">getPerimeter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">double</span> perimeter = <span class="number">0</span>;</span><br><span class="line">		perimeter = n * side;</span><br><span class="line">		<span class="keyword">return</span> perimeter;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//返回面积</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">getArea</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">double</span> area = <span class="number">0</span>;</span><br><span class="line">		area = (n*Math.pow(side, <span class="number">2</span>))/(<span class="number">4</span>*Math.tan(Math.PI/n));</span><br><span class="line">		<span class="keyword">return</span> area;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/d9f269bd9565e13a33b27cc183fcfdf9.png" alt="5.png"></p>
<ul>
<li>设计思路<ul>
<li>照着题目要求从上往下实现即可</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>无</li>
</ul>
</li>
</ul>
<h4 id="2-4"><a href="#2-4" class="headerlink" title="2.4"></a>2.4</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>设计一个队列类Queue，用于存储整数，在队列中，元素以“先进先出”的方式获取。该类包含：</p>
<p>（1） 一个名为element的int[]类型的数据域，保存队列中的int值</p>
<p>（2） 一个名为size的数据域，保存队列中元素的个数</p>
<p>（3） 一个构造方法，使用默认的容量8来创建一个Queue对象</p>
<p>（4） 一个enqueue(int v)方法，用于将v加入队列中</p>
<p>（5） 一个dequeue（）方法，用于从队列中移除元素并返回该元素</p>
<p>（6） 方法isEmpty()，判断队列是否为空</p>
<p>（7） 方法getSize()，返回队列的大小。/</p>
</blockquote>
</li>
<li><p>代码如下</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> Challage2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Queue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		Queue mk = <span class="keyword">new</span> Queue();</span><br><span class="line">		mk.enqueue(<span class="number">2</span>);</span><br><span class="line">		mk.enqueue(<span class="number">6</span>);</span><br><span class="line">		mk.enqueue(<span class="number">23</span>);</span><br><span class="line">		mk.enqueue(<span class="number">14</span>);</span><br><span class="line">		mk.enqueue(<span class="number">5</span>);</span><br><span class="line">		mk.enqueue(<span class="number">53</span>);</span><br><span class="line">		mk.enqueue(<span class="number">22</span>);</span><br><span class="line">		System.out.println(<span class="string">"队列大小为："</span>+ mk.getSize());</span><br><span class="line">		System.out.println(<span class="string">"当前队列为："</span>);</span><br><span class="line">		mk.showRecord();</span><br><span class="line">		System.out.println();</span><br><span class="line">		System.out.println(<span class="string">"出列一个的元素为："</span>+ mk.dequeue());</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> front;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> rear;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span>[] element ;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> size ;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">int</span> defaultSize = <span class="number">8</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Queue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.size = defaultSize;</span><br><span class="line">		element = <span class="keyword">new</span> <span class="keyword">int</span>[size];</span><br><span class="line">		front = rear =  <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Queue</span><span class="params">(<span class="keyword">int</span> size)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(size &lt; <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"队列初始化失败，因为输入参数有误。"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		element = <span class="keyword">new</span> <span class="keyword">int</span>[size];</span><br><span class="line">		front = <span class="number">0</span>;</span><br><span class="line">		rear =  <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> front == rear;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(<span class="keyword">int</span> v)</span></span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(getSize() == size-<span class="number">1</span>) </span><br><span class="line">			System.out.println(<span class="string">"队列已满"</span>);</span><br><span class="line">		element[rear] = v;</span><br><span class="line">		rear = (rear+<span class="number">1</span>)%size;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">dequeue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(isEmpty())</span><br><span class="line">			System.out.println(<span class="string">"队列为空！"</span>);</span><br><span class="line">		<span class="keyword">int</span> record = element[front];</span><br><span class="line">		front = (front + <span class="number">1</span>) % size;</span><br><span class="line">		<span class="keyword">return</span> record;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//for(int i = 0; i&lt;arr.length; i++) &#123;</span></span><br><span class="line">	<span class="comment">//	System.out.print(arr[i] + " ");</span></span><br><span class="line">	<span class="comment">//&#125;</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">if</span>(isEmpty()) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">return</span> size;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showRecord</span><span class="params">()</span></span>&#123;</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;element.length; i++) &#123;</span><br><span class="line">			System.out.print(element[i] + <span class="string">" "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/f3bd566b2734de8e6bb69056557cfd6c.png" alt="6.png"></p>
<ul>
<li>设计思路<ul>
<li>按着实验要求往下实现</li>
<li>重点是进队和出队的操作<ul>
<li>进队<ul>
<li>判断队列是否已满</li>
<li>将进队元素赋予给尾指针对应的位置</li>
<li>尾指针自动加一</li>
</ul>
</li>
<li>出队<ul>
<li>判断队列是否为空</li>
<li>返回头指针位置的数组值</li>
<li>头指针自动加一</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>无</li>
</ul>
</li>
</ul>
<h3 id="第三次上机"><a href="#第三次上机" class="headerlink" title="第三次上机"></a>第三次上机</h3><h4 id="3-1"><a href="#3-1" class="headerlink" title="3.1"></a>3.1</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>设计一个名为Person的类和它的两个名为Student和Employee的子类，Employee又有子类：教员类Faulty和职员类Staff。每个人都有姓名、地址、电话号码和电子邮箱地址。学生有班级状态（大一、大二、大三、大四）。将这些状态定义为常量。一个雇员有办公室、工资和受聘日期（定义一个MyDate类为受聘日期创建一个对象）。教员有办公时间和级别。职员有职务称号。覆盖每个类的toString()方法，利用多态机制显示相应的类别名字和人名。</p>
</blockquote>
</li>
<li><p>代码如下</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challage3;</span><br><span class="line">	</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String name;</span><br><span class="line">	<span class="keyword">public</span> String address;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> phone;</span><br><span class="line">	<span class="keyword">public</span> String email;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"我是人类--"</span>+ name);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (<span class="keyword">this</span>.name);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Person klaus = <span class="keyword">new</span> Person();</span><br><span class="line">		klaus.name = <span class="string">"klaus"</span>;</span><br><span class="line">		klaus.address = <span class="string">"颐和园"</span>;</span><br><span class="line">		klaus.phone = <span class="number">2333</span>;</span><br><span class="line">		klaus.email = <span class="string">"email@email.com"</span>;</span><br><span class="line">		klaus.showInfo();</span><br><span class="line">		</span><br><span class="line">		Person a = <span class="keyword">new</span> Student();</span><br><span class="line">		a.showInfo();</span><br><span class="line">		</span><br><span class="line">		Person b = <span class="keyword">new</span> Employee();</span><br><span class="line">		b.showInfo();</span><br><span class="line">		</span><br><span class="line">		Person c = <span class="keyword">new</span> Faulty();</span><br><span class="line">		c.showInfo();</span><br><span class="line">		</span><br><span class="line">		Person d = <span class="keyword">new</span> Staff();</span><br><span class="line">		d.showInfo();</span><br><span class="line">		</span><br><span class="line">		System.out.println(klaus);</span><br><span class="line">		System.out.println(a);</span><br><span class="line">		System.out.println(b);</span><br><span class="line">		System.out.println(c);</span><br><span class="line">		System.out.println(d);</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line">	</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> String name = <span class="string">"小明"</span>;</span><br><span class="line">	<span class="keyword">public</span> String status;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"我是学生--"</span>+ name);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (<span class="keyword">this</span>.name);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">extends</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">	<span class="keyword">public</span> String name = <span class="string">"张三"</span>;</span><br><span class="line">	<span class="keyword">public</span> String office;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span> salary;</span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDate</span> </span>&#123;</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">int</span> years;</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">int</span> months;</span><br><span class="line">		<span class="keyword">public</span> <span class="keyword">int</span> dates;</span><br><span class="line">	&#125;	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"我是雇员--"</span> + name);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> (<span class="keyword">this</span>.name);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Faulty</span> <span class="keyword">extends</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> String name = <span class="string">"李四"</span>;</span><br><span class="line">	<span class="keyword">public</span> String workingDate;</span><br><span class="line">	<span class="keyword">public</span> String level;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"我是教员--"</span> + name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Staff</span> <span class="keyword">extends</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> String name = <span class="string">"王五"</span>;</span><br><span class="line">	<span class="keyword">public</span> String positionTitle;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"我是职员--"</span> + name);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/268bab3104e25c77d5a5614ad8eda237.png" alt="7.png"></p>
<ul>
<li>设计思路<ul>
<li>按题目要求往下定义即可，注意继承的时候用<code>extends</code></li>
</ul>
</li>
<li>遇到的问题<ul>
<li>无</li>
</ul>
</li>
</ul>
<h4 id="3-3"><a href="#3-3" class="headerlink" title="3.3"></a>3.3</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>使用下面的方法头编写方法，从一个整数的数组列表中去掉重复元素(如果有重复元素，只保留其中一个值)：<br>public static void removeDuplicate(ArrayList<integer> list) </integer></p>
</blockquote>
</li>
<li><p>代码如下</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challage3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Delete</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">3</span>&#125;;</span><br><span class="line">		ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> a : arr) &#123;</span><br><span class="line">			list.add(a);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		removeDuplicate(list);</span><br><span class="line">		<span class="comment">//list  = new ArrayList&lt;Integer&gt;(new HashSet&lt;Integer&gt;(list));</span></span><br><span class="line">		<span class="comment">//ArrayList&lt;Integer&gt; list_result = </span></span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(Integer b : list) &#123;</span><br><span class="line">			System.out.print(b + <span class="string">" "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">removeDuplicate</span><span class="params">(ArrayList&lt;Integer&gt; list)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		HashSet h  =   <span class="keyword">new</span>  HashSet(list);</span><br><span class="line">	    list.clear();</span><br><span class="line">	    list.addAll(h);</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//list  = new ArrayList&lt;Integer&gt;(new HashSet&lt;Integer&gt;(list));</span></span><br><span class="line">		</span><br><span class="line">		<span class="comment">//return list; ArrayList&lt;Integer&gt;</span></span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/b60843c2a1071331b1e3bb596607a8a5.png" alt="8.png"></p>
<ul>
<li><p>设计思路</p>
<ul>
<li>定义去重<code>removeDuplicate()</code>方法<ul>
<li>传入参数为数组列表<code>ArrayList</code><ul>
<li><code>ArraryList</code>实现的是List接口，存放的是对象的引用</li>
</ul>
</li>
<li>将这个数组列表转换为<code>HashSet</code><ul>
<li><code>HashSet</code>实现的是Set接口，存放之前检索对象的hashCode，没有相等，则存入对象。两者的区别如下：<ul>
<li><code>ArraryList</code>可以重复引用，<code>HashSet</code>是不重复存放</li>
<li><code>ArraryList</code>是无序存放，<code>HashSet</code>是有序存放</li>
<li><code>ArraryList</code>是数组存储，<code>HashSet</code>存储对象</li>
</ul>
</li>
<li>所以可以通过将<code>ArraryList</code>转换成<code>HashSet</code>来实现题目的要求</li>
</ul>
</li>
</ul>
</li>
<li>主函数<ul>
<li>定义了一个包含重复元素的无序的整型数组<code>arr[] = {2,3,4,2,5,7,1,8,4,4,3}</code></li>
<li>调用<code>removeDuplicate()</code>方法</li>
<li>打印出数组列表中的元素</li>
</ul>
</li>
</ul>
</li>
<li><p>遇到的问题</p>
<ul>
<li><p>在网上搜索这样的方法的时候发现了这一个巧妙的利用转换来快速去重的方法，实现起来的时候，一开始使用的是注释之中的方法，但是没有<code>list.caear()</code>的情况下就是不能实现去重，这是我不明白的点，而且在这种情况下需要要有返回值，那么方法的定义也不是老师的要求了。</p>
</li>
<li><p>具体情况如下：</p>
<ul>
<li>当定义的方法如下</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ArrayList&lt;Integer&gt; <span class="title">removeDuplicate</span><span class="params">(ArrayList&lt;Integer&gt; list)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">		list  = <span class="keyword">new</span> ArrayList&lt;Integer&gt;(<span class="keyword">new</span> HashSet&lt;Integer&gt;(list));</span><br><span class="line">		<span class="keyword">return</span>  list; <span class="comment">//ArrayList&lt;Integer&gt;</span></span><br><span class="line">		</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>结果为</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/c04039ca7aad37dd3ad0cfb0e7f424d9.png" alt="9.png"></p>
<ul>
<li>所以没有实现去重！</li>
</ul>
</li>
<li><p><strong>解决：</strong></p>
<ul>
<li>在运行这个函数之后再次写一句<code>list  = **new** ArrayList&lt;Integer&gt;(**new** HashSet&lt;Integer&gt;(list));</code>，这样就可以成功实现去重，应该是在方法里面HashSet没有成功转换成为ArraryList</li>
<li>此时的代码</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challage3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Delete</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		<span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[] &#123;<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">3</span>&#125;;</span><br><span class="line">		ArrayList&lt;Integer&gt; list = <span class="keyword">new</span> ArrayList&lt;Integer&gt;();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> a : arr) &#123;</span><br><span class="line">			list.add(a);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		removeDuplicate(list);</span><br><span class="line">		list  = <span class="keyword">new</span> ArrayList&lt;Integer&gt;(<span class="keyword">new</span> HashSet&lt;Integer&gt;(list));</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(Integer b : list) &#123;</span><br><span class="line">			System.out.print(b + <span class="string">" "</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">		</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ArrayList&lt;Integer&gt; <span class="title">removeDuplicate</span><span class="params">(ArrayList&lt;Integer&gt; list)</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		list  = <span class="keyword">new</span> ArrayList&lt;Integer&gt;(<span class="keyword">new</span> HashSet&lt;Integer&gt;(list));</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">return</span>  list; <span class="comment">//ArrayList&lt;Integer&gt;</span></span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/c12bb1451914251d7e3b23f0979c1cef.png" alt="10.png"></p>
</li>
<li><p>其实都是转换的方法，就是处理最终的返回结果的时候的操作有区别而已</p>
</li>
</ul>
</li>
</ul>
<h3 id="第四次上机"><a href="#第四次上机" class="headerlink" title="第四次上机"></a>第四次上机</h3><h4 id="4-2"><a href="#4-2" class="headerlink" title="4.2"></a>4.2</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>使用容器来模拟枪射击。</p>
<p>（1）定义子弹类：Ball, 有属性：编号、型号。</p>
<p>默认构造方法，设编号为1， 型号为“M54”。</p>
<p>带参数构造方法：设定编号和型号。</p>
<p>方法1：取得编号</p>
<p>方法2：取得型号。</p>
<p>方法3：显示子弹的编号和型号： 编号-型号。</p>
<p>（2）定义枪类：Gun</p>
<p>有属性：编号，型号，弹夹，装弹数量。</p>
<p>默认构造方法：创建编号为1，型号为“M54”，装弹数量为6。</p>
<p>带参数构造方法：与属性相同的参数，设定属性：编号，型号，数量的值。</p>
<p>装弹方法：将一个子弹对象装入弹夹， 如果弹夹已满，抛出弹夹满异常。</p>
<p>射击方法：返回一个子弹对象，减少弹夹的一颗子弹，如果弹夹空，则抛出空异常。</p>
<p>显示弹夹内子弹列表信息方法：显示弹夹内的子弹信息：编号-型号</p>
<p>取得当前弹夹子弹数的方法。</p>
<p>（3）编写带main方法的测试类，模拟枪的装弹和射击功能。</p>
</blockquote>
</li>
<li><p>代码如下</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange4;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Battle</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Gun gun = <span class="keyword">new</span> Gun();</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"Start loadding:"</span>);</span><br><span class="line">		<span class="keyword">int</span> index = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Balls bullet = <span class="keyword">new</span> Balls(++index, <span class="string">"M54"</span>);</span><br><span class="line">				gun.load(bullet);</span><br><span class="line">			&#125; </span><br><span class="line">			<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				System.out.println(e);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		System.out.println(<span class="string">"The list of bullets:"</span>);</span><br><span class="line">		gun.print();</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"Start shotting:"</span>);</span><br><span class="line">		<span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Balls bullet = gun.shooting();</span><br><span class="line">				bullet.print();</span><br><span class="line">			&#125; </span><br><span class="line">			<span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">				System.out.println(e);</span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Balls</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">	<span class="keyword">private</span> String type;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Balls</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">this</span>.type = <span class="string">"M54"</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Balls</span><span class="params">(<span class="keyword">int</span> id, String type)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.type = type;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> id;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getType</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> type;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="keyword">this</span>.id + <span class="string">"-"</span> + <span class="keyword">this</span>.type);</span><br><span class="line">		&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Gun</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> id; </span><br><span class="line">	<span class="keyword">private</span> String type;</span><br><span class="line">	<span class="keyword">private</span> List&lt;Balls&gt; bullets; <span class="comment">//Clip</span></span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> count; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Gun</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">this</span>.type = <span class="string">"M54"</span>;</span><br><span class="line">		<span class="keyword">this</span>.count = <span class="number">6</span>;</span><br><span class="line">		<span class="keyword">this</span>.bullets = <span class="keyword">new</span> ArrayList&lt;&gt;(count);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Gun</span><span class="params">(<span class="keyword">int</span> id, String type, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id = id;</span><br><span class="line">		<span class="keyword">this</span>.type = type;</span><br><span class="line">		<span class="keyword">this</span>.count = count;</span><br><span class="line">		<span class="keyword">this</span>.bullets = <span class="keyword">new</span> ArrayList&lt;&gt;(count);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//loading</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">load</span><span class="params">(Balls bullet)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (bullets.size() == <span class="keyword">this</span>.count) &#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"The clip is full!"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		bullets.add(bullet);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//shooting</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Balls <span class="title">shooting</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (bullets.isEmpty()) &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> Exception(<span class="string">"The clip is empty!"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> bullets.remove(<span class="number">0</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//balls-number</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> bullets.size();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//bullets-list</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">for</span> (Balls bullet : bullets) &#123;</span><br><span class="line">			bullet.print();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/9750d1bc8280bfcb31018e18010f11f3.png" alt="11.png"></p>
<ul>
<li>设计思路<ul>
<li>定义子弹类</li>
<li>定义枪类<ul>
<li>枪里有子弹，可以用一个数组列表来存储</li>
<li>装载子弹<code>load()</code>和射击<code>shooting()</code>的方法添加异常处理方法</li>
<li>定义打印出当前子弹情况的方法<code>print()</code></li>
</ul>
</li>
<li>主函数<ul>
<li>开始装弹，<code>gun</code>的实例调用<code>load</code>方法</li>
<li>打印当前子弹的情况</li>
<li>开始射击，<code>gun</code>的实例调用<code>shooting()</code>方法</li>
<li>打印当前子弹的情况</li>
</ul>
</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>这个代码参考了网上的类似的题目，一开始还想让枪类继承子弹类，因为有共通的方法，但是实现起来有些许问题，也能实现，但是还是分开来写更好。</li>
</ul>
</li>
</ul>
<h4 id="4-3"><a href="#4-3" class="headerlink" title="4.3"></a>4.3</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>设计一个名为Triangle类，该类包括三个名为point1，point2和point3的点对，表示二维平面三角形的三个顶点，带参数构造方法，所有数据域的访问器方法，一个名为getArea()方法返回三角形面积，一个getPerimeter()方法返回三角形周长，一个名为toString()方法返回这个三角形的字符串描述。在三角形中任意两边之和大于第三边，创建一个IllegalTriangleException类，然后修改Triangle类的构造方法，如果创建的三角形的边违反这一规则，抛出一个IllegalTriangleException对象。</p>
</blockquote>
</li>
<li><p>代码如下</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange4;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Triangle</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"请输入三个点的坐标:"</span>);</span><br><span class="line">		<span class="keyword">int</span>[] some = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">6</span>];</span><br><span class="line">		Scanner input1 = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">		some[<span class="number">0</span>] = input1.nextInt();</span><br><span class="line">		some[<span class="number">1</span>] = input1.nextInt();</span><br><span class="line">		some[<span class="number">2</span>] = input1.nextInt();</span><br><span class="line">		some[<span class="number">3</span>] = input1.nextInt();</span><br><span class="line">		some[<span class="number">4</span>] = input1.nextInt();</span><br><span class="line">		some[<span class="number">5</span>] = input1.nextInt();</span><br><span class="line">		Triangle awesome = <span class="keyword">new</span> Triangle();</span><br><span class="line">		<span class="keyword">int</span>[][] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>][<span class="number">2</span>];</span><br><span class="line">		arr[<span class="number">0</span>][<span class="number">0</span>] = some[<span class="number">0</span>];</span><br><span class="line">		arr[<span class="number">0</span>][<span class="number">1</span>] = some[<span class="number">1</span>];</span><br><span class="line">		arr[<span class="number">1</span>][<span class="number">0</span>] = some[<span class="number">2</span>];</span><br><span class="line">		arr[<span class="number">1</span>][<span class="number">1</span>] = some[<span class="number">3</span>];</span><br><span class="line">		arr[<span class="number">2</span>][<span class="number">0</span>] = some[<span class="number">4</span>];</span><br><span class="line">		arr[<span class="number">2</span>][<span class="number">1</span>] = some[<span class="number">5</span>];</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			awesome.TriangleCreate(arr);</span><br><span class="line">			<span class="keyword">if</span> (TestTri(arr)) &#123;</span><br><span class="line">				awesome.getPoint1(arr);</span><br><span class="line">				awesome.getPoint2(arr);</span><br><span class="line">				awesome.getPoint3(arr);</span><br><span class="line">				System.out.println(awesome.toString(arr));</span><br><span class="line">			<span class="comment">//	System.out.println("这个三角形的面积为:" + awesome.getArea(arr));</span></span><br><span class="line">			<span class="comment">//	System.out.println("这个三角形的周长为:" + awesome.getPerimeter(arr));</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125; <span class="keyword">catch</span> (IllegalTriangleException e) &#123;</span><br><span class="line">			System.out.println(e.getMessage());</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">double</span> <span class="title">caculate</span><span class="params">(<span class="keyword">int</span>[][] arr, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">double</span> tmp = Math.pow((arr[i][<span class="number">0</span>] - arr[j][<span class="number">0</span>]),<span class="number">2</span>) + Math.pow((arr[i][<span class="number">1</span>] - arr[j][<span class="number">1</span>]),<span class="number">2</span>);</span><br><span class="line">		tmp = Math.sqrt(tmp);</span><br><span class="line">		<span class="keyword">return</span> tmp;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">TriangleCreate</span><span class="params">(<span class="keyword">int</span>[][] arr)</span> <span class="keyword">throws</span> IllegalTriangleException </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">double</span> length1 = caculate(arr, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">double</span> length2 = caculate(arr, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">		<span class="keyword">double</span> length3 = caculate(arr, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">		<span class="keyword">if</span>(length1 + length2 &gt; length3 &amp;&amp; length2 + length3 &gt; length1 &amp;&amp; length1 + length3 &gt;length2) &#123;</span><br><span class="line">			System.out.println(<span class="string">"这三个点可以构成三角形."</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> IllegalTriangleException(<span class="string">"这三个点不能构成三角形"</span>);	</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">TestTri</span><span class="params">(<span class="keyword">int</span>[][] arr)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">double</span> length1 = caculate(arr, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">double</span> length2 = caculate(arr, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">		<span class="keyword">double</span> length3 = caculate(arr, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">		<span class="keyword">if</span>(length1 + length2 &gt; length3 &amp;&amp; length2 + length3 &gt; length1 &amp;&amp; length1 + length3 &gt;length2) &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getPoint1</span><span class="params">(<span class="keyword">int</span>[][] arr)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"X1的坐标为:("</span> + arr[<span class="number">0</span>][<span class="number">0</span>] + <span class="string">","</span> + arr[<span class="number">0</span>][<span class="number">1</span>] + <span class="string">")"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getPoint2</span><span class="params">(<span class="keyword">int</span>[][] arr)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"X2的坐标为:("</span> + arr[<span class="number">1</span>][<span class="number">0</span>] + <span class="string">","</span> + arr[<span class="number">1</span>][<span class="number">1</span>] + <span class="string">")"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getPoint3</span><span class="params">(<span class="keyword">int</span>[][] arr)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"X3的坐标为:("</span> + arr[<span class="number">2</span>][<span class="number">0</span>] + <span class="string">","</span> + arr[<span class="number">2</span>][<span class="number">1</span>] + <span class="string">")"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getArea</span><span class="params">(<span class="keyword">int</span>[][] arr)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">double</span> length1 = caculate(arr, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">double</span> length2 = caculate(arr, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">		<span class="keyword">double</span> length3 = caculate(arr, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">		<span class="keyword">double</span> p = (length1 + length2 + length3)/ <span class="number">2.0</span>;</span><br><span class="line">		<span class="keyword">double</span> area = Math.sqrt(p*(p-length1)*(p-length2)*(p-length3));</span><br><span class="line">		<span class="keyword">return</span> area;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getPerimeter</span><span class="params">(<span class="keyword">int</span>[][] arr)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">double</span> length1 = caculate(arr, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">		<span class="keyword">double</span> length2 = caculate(arr, <span class="number">0</span>, <span class="number">2</span>);</span><br><span class="line">		<span class="keyword">double</span> length3 = caculate(arr, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">		<span class="keyword">double</span> perimeter = length1 + length2 + length3;</span><br><span class="line">		<span class="keyword">return</span> perimeter;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">(<span class="keyword">int</span>[][] arr)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">double</span> area = getArea(arr);</span><br><span class="line">		<span class="keyword">double</span> perimeter = getPerimeter(arr);</span><br><span class="line">		<span class="keyword">return</span> (<span class="string">"这个三角形的周长是:"</span> + perimeter + <span class="string">"\n"</span> + <span class="string">"面积为："</span> + area);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IllegalTriangleException</span> <span class="keyword">extends</span> <span class="title">Exception</span> </span>&#123;</span><br><span class="line">	 IllegalTriangleException(String s) &#123;</span><br><span class="line">		<span class="keyword">super</span>(s);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/13/2ede7c2b7ff558dbf0fff219c45f956b.png" alt="2.png"></p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/13/bb41190bb0b7b9dfe981f11d559ac856.png" alt="3.png"></p>
<ul>
<li>设计思路<ul>
<li>搜索了一下给定三个点直接求三角形面积的公式</li>
<li>自定义异常的定义</li>
<li>按题意往下做即可</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>异常也是对象，在java中万物皆对象，迷糊了好一阵，在老师的教导下明白了这个道理。</li>
</ul>
</li>
</ul>
<h3 id="第五次上机"><a href="#第五次上机" class="headerlink" title="第五次上机"></a>第五次上机</h3><h4 id="5-1"><a href="#5-1" class="headerlink" title="5.1"></a>5.1</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>创建一个窗体，选择合适的布局管理器，显示一个按钮“查询”，点击该按钮以后，查询university数据库中的student表（包括学号，姓名，性别，年龄，班级，来自省份等字段）中的信息，并将查询结果返回给窗体，显示在窗体的下拉列表（或文本框）中；在窗体中显示一个按钮“注册”，以及可以填写学生各项信息的输入框，输入学生各项信息后，点击注册按钮，程序判断该学生是否已存在于数据库中，如果不存在，则注册到数据库，并显示注册成功，如果存在，则提示注册失败。</p>
</blockquote>
</li>
<li><p>代码如下</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challage5;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.*;  </span><br><span class="line"><span class="keyword">import</span> java.awt.event.*;  </span><br><span class="line"><span class="keyword">import</span> java.sql.*;  </span><br><span class="line"><span class="keyword">import</span> java.util.Vector;  </span><br><span class="line"><span class="keyword">import</span> javax.swing.*;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InnerShow</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;  </span><br><span class="line">  </span><br><span class="line">  <span class="comment">//定义Statement对象</span></span><br><span class="line">  <span class="keyword">private</span> Connection conn;   </span><br><span class="line">  <span class="keyword">private</span> Statement statement; </span><br><span class="line">  <span class="keyword">private</span> Statement statement2; </span><br><span class="line">  <span class="keyword">private</span> Statement statement3;</span><br><span class="line">  <span class="comment">//定义结果集</span></span><br><span class="line">  <span class="keyword">private</span> ResultSet resultSet;</span><br><span class="line">  <span class="keyword">private</span> ResultSet resultSet3;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> resultSet2;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">//GUI变量定义  </span></span><br><span class="line">  <span class="keyword">private</span> JTable table;   </span><br><span class="line">  <span class="keyword">private</span> JTextField inputQuery;   </span><br><span class="line">  <span class="keyword">private</span> JButton submitQuery;  </span><br><span class="line">  <span class="keyword">private</span> JLabel tip; </span><br><span class="line">  <span class="keyword">private</span> JLabel number; </span><br><span class="line">  <span class="keyword">private</span> JTextField inputNumber; </span><br><span class="line">  <span class="keyword">private</span> JLabel name;</span><br><span class="line">  <span class="keyword">private</span> JTextField inputName; </span><br><span class="line">  <span class="keyword">private</span> JLabel gender;</span><br><span class="line">  <span class="keyword">private</span> JTextField inputGender; </span><br><span class="line">  <span class="keyword">private</span> JLabel age;</span><br><span class="line">  <span class="keyword">private</span> JTextField inputAge; </span><br><span class="line">  <span class="keyword">private</span> JLabel theclass;</span><br><span class="line">  <span class="keyword">private</span> JTextField inputClass; </span><br><span class="line">  <span class="keyword">private</span> JLabel province; </span><br><span class="line">  <span class="keyword">private</span> JTextField inputProvince; </span><br><span class="line">  <span class="keyword">private</span> JButton register;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//初始化</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">InnerShow</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">        </span><br><span class="line">      <span class="comment">//Form的标题  </span></span><br><span class="line">      <span class="keyword">super</span>( <span class="string">"Student Information"</span> );   </span><br><span class="line">     </span><br><span class="line">		String url = <span class="string">"jdbc:mysql://localhost:3306/university"</span>;</span><br><span class="line">		String user = <span class="string">"root"</span>;</span><br><span class="line">		String password = <span class="string">"root123456"</span>;</span><br><span class="line">        </span><br><span class="line">      <span class="comment">//加载驱动程序以连接数据库  </span></span><br><span class="line">      <span class="keyword">try</span> &#123;  </span><br><span class="line">          Class.forName( <span class="string">"com.mysql.cj.jdbc.Driver"</span> );  </span><br><span class="line">          conn = DriverManager.getConnection(url, user, password);  </span><br><span class="line">      &#125;<span class="keyword">catch</span> ( ClassNotFoundException cnfex ) &#123; </span><br><span class="line">    	  <span class="comment">//捕获加载驱动程序异常  </span></span><br><span class="line">          System.err.println(<span class="string">"装载 JDBC 驱动程序失败"</span> );  </span><br><span class="line">          cnfex.printStackTrace();   </span><br><span class="line">          System.exit( <span class="number">1</span> );  </span><br><span class="line">      &#125;<span class="keyword">catch</span> ( SQLException sqlex ) &#123; </span><br><span class="line">    	  <span class="comment">//捕获连接数据库异常  </span></span><br><span class="line">          System.err.println( <span class="string">"连接数据库失败"</span> );   </span><br><span class="line">          sqlex.printStackTrace();   </span><br><span class="line">          System.exit( <span class="number">1</span> );    </span><br><span class="line">      &#125;   </span><br><span class="line">        </span><br><span class="line">      <span class="comment">//如果数据库连接成功，则建立GUI </span></span><br><span class="line">      tip = <span class="keyword">new</span> JLabel(<span class="string">"输入人名，按查询按钮查看结果"</span>);</span><br><span class="line">      inputQuery  = <span class="keyword">new</span> JTextField();   </span><br><span class="line">      submitQuery = <span class="keyword">new</span> JButton( <span class="string">"查询"</span> );  </span><br><span class="line">      name = <span class="keyword">new</span> JLabel(<span class="string">"姓名"</span>);</span><br><span class="line">      number = <span class="keyword">new</span> JLabel(<span class="string">"学号"</span>);</span><br><span class="line">      gender = <span class="keyword">new</span> JLabel(<span class="string">"性别"</span>);</span><br><span class="line">      age = <span class="keyword">new</span> JLabel(<span class="string">"年龄"</span>);</span><br><span class="line">      theclass = <span class="keyword">new</span> JLabel(<span class="string">"班级"</span>);</span><br><span class="line">      province = <span class="keyword">new</span> JLabel(<span class="string">"省份"</span>);</span><br><span class="line">      inputNumber = <span class="keyword">new</span> JTextField(<span class="number">10</span>);</span><br><span class="line">      inputName = <span class="keyword">new</span> JTextField(<span class="number">10</span>);</span><br><span class="line">      inputGender = <span class="keyword">new</span> JTextField(<span class="number">10</span>);</span><br><span class="line">      inputAge = <span class="keyword">new</span> JTextField(<span class="number">3</span>);</span><br><span class="line">      inputClass = <span class="keyword">new</span> JTextField(<span class="number">20</span>);</span><br><span class="line">      inputProvince = <span class="keyword">new</span> JTextField(<span class="number">15</span>);</span><br><span class="line">      register = <span class="keyword">new</span> JButton(<span class="string">"注册"</span>);</span><br><span class="line">        </span><br><span class="line">      <span class="comment">//定义Button事件  </span></span><br><span class="line">      submitQuery.addActionListener( <span class="keyword">new</span> ActionListener() &#123;  </span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">    	  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">( ActionEvent e )</span></span>&#123;   </span><br><span class="line">              getTable();  </span><br><span class="line">          &#125;  </span><br><span class="line">      &#125;);   </span><br><span class="line">      </span><br><span class="line">      register.addActionListener(<span class="keyword">new</span> ActionListener() &#123;</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">			<span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">			setTable();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;);</span><br><span class="line">      </span><br><span class="line">        </span><br><span class="line">      <span class="comment">//组件布局</span></span><br><span class="line">      JPanel topPanel = <span class="keyword">new</span> JPanel();   </span><br><span class="line">      topPanel.setLayout( <span class="keyword">new</span> BorderLayout() ); </span><br><span class="line">      </span><br><span class="line">      topPanel.add(tip, BorderLayout.NORTH); </span><br><span class="line">      topPanel.add( <span class="keyword">new</span> JScrollPane( inputQuery), BorderLayout.CENTER );   </span><br><span class="line">      topPanel.add( submitQuery, BorderLayout.SOUTH );   </span><br><span class="line">      table = <span class="keyword">new</span> JTable();   </span><br><span class="line">      </span><br><span class="line">      <span class="comment">//注册部分</span></span><br><span class="line">      JPanel buttonPanel = <span class="keyword">new</span> JPanel();</span><br><span class="line">      buttonPanel.setLayout(<span class="keyword">new</span> FlowLayout());</span><br><span class="line">      </span><br><span class="line">      buttonPanel.add(number);</span><br><span class="line">      buttonPanel.add(inputNumber);</span><br><span class="line">      </span><br><span class="line">      buttonPanel.add(name);</span><br><span class="line">      buttonPanel.add(inputName);</span><br><span class="line">      </span><br><span class="line">      buttonPanel.add(gender);</span><br><span class="line">      buttonPanel.add(inputGender);</span><br><span class="line">      </span><br><span class="line">      buttonPanel.add(age);</span><br><span class="line">      buttonPanel.add(inputAge);</span><br><span class="line">      </span><br><span class="line">      buttonPanel.add(theclass);</span><br><span class="line">      buttonPanel.add(inputClass);</span><br><span class="line">      </span><br><span class="line">      buttonPanel.add(province);</span><br><span class="line">      buttonPanel.add(inputProvince);</span><br><span class="line">      </span><br><span class="line">      JPanel registerJPanel = <span class="keyword">new</span> JPanel();</span><br><span class="line">      registerJPanel.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">      </span><br><span class="line">      registerJPanel.add(register,BorderLayout.CENTER);</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//总体布局管理器</span></span><br><span class="line">      Container c = getContentPane();   </span><br><span class="line">      c.setLayout( <span class="keyword">new</span> BorderLayout() );   </span><br><span class="line">       </span><br><span class="line">      c.add( topPanel, BorderLayout.NORTH );   </span><br><span class="line">      c.add( table, BorderLayout.CENTER );  </span><br><span class="line">      c.add(buttonPanel, BorderLayout.SOUTH);</span><br><span class="line">      c.add(registerJPanel, BorderLayout.EAST);</span><br><span class="line">     </span><br><span class="line">      setSize( <span class="number">1300</span>, <span class="number">300</span> );   </span><br><span class="line">        </span><br><span class="line">      <span class="comment">//显示Form  </span></span><br><span class="line">      show();   </span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//定义在表格中显示查询结果的方法</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">getTable</span><span class="params">()</span></span>&#123;  </span><br><span class="line">        </span><br><span class="line">      <span class="keyword">try</span> &#123;   </span><br><span class="line">          <span class="comment">//执行SQL语句  </span></span><br><span class="line">          String query = inputQuery.getText(); </span><br><span class="line">          String realQuery = <span class="string">"select * from student where name = \""</span> + query + <span class="string">"\""</span>;</span><br><span class="line">          statement = conn.createStatement();   </span><br><span class="line">          resultSet = statement.executeQuery( realQuery );   </span><br><span class="line">            </span><br><span class="line">          <span class="comment">//在表格中显示查询结果  </span></span><br><span class="line">          displayResultSet( resultSet );   </span><br><span class="line">      &#125;<span class="keyword">catch</span> ( SQLException sqlex ) &#123;   </span><br><span class="line">          sqlex.printStackTrace();   </span><br><span class="line">      &#125;   </span><br><span class="line">  &#125;   </span><br><span class="line">  </span><br><span class="line">  <span class="comment">//将查询结果显示到表格上</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">displayResultSet</span><span class="params">( ResultSet rs )</span> <span class="keyword">throws</span> SQLException </span>&#123;   </span><br><span class="line">   </span><br><span class="line">      <span class="comment">//定位到达第一条记录  </span></span><br><span class="line">      <span class="keyword">boolean</span> moreRecords = rs.next();   </span><br><span class="line">        </span><br><span class="line">      <span class="comment">//如果没有记录，则提示一条消息  </span></span><br><span class="line">      <span class="keyword">if</span> ( ! moreRecords ) &#123;   </span><br><span class="line">          JOptionPane.showMessageDialog( <span class="keyword">this</span>, <span class="string">"数据库中无此人"</span> );     </span><br><span class="line">          <span class="keyword">return</span>;   </span><br><span class="line">      &#125;   </span><br><span class="line">      </span><br><span class="line">      <span class="comment">//创建vector向量类</span></span><br><span class="line">      Vector columnHeads = <span class="keyword">new</span> Vector();   </span><br><span class="line">      Vector rows = <span class="keyword">new</span> Vector();   </span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;   </span><br><span class="line">          <span class="comment">//获取结果集的元数据  </span></span><br><span class="line">          ResultSetMetaData rsmd = rs.getMetaData();            </span><br><span class="line">          </span><br><span class="line">          <span class="comment">//获得列名</span></span><br><span class="line">          <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= rsmd.getColumnCount(); ++i )   </span><br><span class="line">              columnHeads.addElement( rsmd.getColumnName( i ) );  </span><br><span class="line">          </span><br><span class="line">          <span class="comment">//获取所有记录  </span></span><br><span class="line">          <span class="keyword">do</span> &#123;  </span><br><span class="line">              rows.addElement( getNextRow( rs, rsmd ) );   </span><br><span class="line">          &#125; <span class="keyword">while</span> ( rs.next() );   </span><br><span class="line">          </span><br><span class="line">          <span class="comment">//在表格中显示查询结果  </span></span><br><span class="line">          table = <span class="keyword">new</span> JTable( rows, columnHeads );   </span><br><span class="line">          JScrollPane scroller = <span class="keyword">new</span> JScrollPane( table );   </span><br><span class="line">          Container c = getContentPane();   </span><br><span class="line">          c.remove(<span class="number">1</span>);   </span><br><span class="line">          c.add( scroller, BorderLayout.CENTER );   </span><br><span class="line">          </span><br><span class="line">          <span class="comment">//刷新Table  </span></span><br><span class="line">          c.validate();  </span><br><span class="line">      &#125;<span class="keyword">catch</span> ( SQLException sqlex ) &#123;   </span><br><span class="line">          sqlex.printStackTrace();   </span><br><span class="line">      &#125;   </span><br><span class="line">  &#125; </span><br><span class="line">  </span><br><span class="line">  <span class="comment">//定义获取下一条记录的方法</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> Vector <span class="title">getNextRow</span><span class="params">( ResultSet rs, ResultSetMetaData rsmd )</span><span class="keyword">throws</span> SQLException</span>&#123;  </span><br><span class="line">      Vector currentRow = <span class="keyword">new</span> Vector();   </span><br><span class="line">      <span class="comment">//获取一行的数据</span></span><br><span class="line">      <span class="keyword">for</span> ( <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= rsmd.getColumnCount(); ++i )  </span><br><span class="line">          currentRow.addElement( rs.getString( i ) );   </span><br><span class="line">        </span><br><span class="line">      <span class="comment">//返回一条记录   </span></span><br><span class="line">      <span class="keyword">return</span> currentRow;   </span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">//将输入的数据写入数据库中</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setTable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="comment">//获取文本框的input数据</span></span><br><span class="line">		String stuNumber = inputNumber.getText();</span><br><span class="line">		<span class="keyword">int</span> realNumber = Integer.parseInt(stuNumber);</span><br><span class="line">		String stuName = inputName.getText();</span><br><span class="line">		String stuGender = inputGender.getText();</span><br><span class="line">		String stuAge = inputAge.getText();</span><br><span class="line">		<span class="keyword">int</span> realAge = Integer.parseInt(stuAge);</span><br><span class="line">		String stuClass = inputClass.getText();</span><br><span class="line">		String stuProvince = inputProvince.getText();</span><br><span class="line">		</span><br><span class="line">		String registerInsert = <span class="string">"insert into student (number, name, gender, age, class, province) "</span></span><br><span class="line">				+ <span class="string">"values ("</span> + realNumber + <span class="string">",\""</span> + stuName +<span class="string">"\","</span> + <span class="string">"\""</span> + stuGender </span><br><span class="line">				+ <span class="string">"\","</span> + stuAge + <span class="string">",\""</span> + stuClass + <span class="string">"\","</span> + <span class="string">"\""</span> + stuProvince + <span class="string">"\");"</span>;</span><br><span class="line">		statement2 = conn.createStatement();</span><br><span class="line">		String checkQuery = <span class="string">"select * from student where name = \""</span> + stuName + <span class="string">"\""</span>;</span><br><span class="line">		statement3 = conn.createStatement();</span><br><span class="line">		resultSet3 = statement3.executeQuery( checkQuery );</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//如果没有同名的人，将数据写入</span></span><br><span class="line">		<span class="keyword">if</span>(!resultSet3.next()) &#123;	</span><br><span class="line">			<span class="comment">//返回执行SQL语句影响的行的数目</span></span><br><span class="line">			resultSet2 = statement2.executeUpdate(registerInsert); </span><br><span class="line">			</span><br><span class="line">			<span class="keyword">if</span>(resultSet2 == <span class="number">1</span>) &#123;</span><br><span class="line">				JOptionPane.showMessageDialog(<span class="keyword">this</span>, <span class="string">"注册成功！"</span>);</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> &#123;</span><br><span class="line">			JOptionPane.showMessageDialog(<span class="keyword">this</span>, <span class="string">"请勿输入相同名字的学生！"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125; <span class="keyword">catch</span> ( SQLException sqlex ) &#123;   </span><br><span class="line">        sqlex.printStackTrace();   </span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line">  <span class="comment">//断开数据库连接</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shutDown</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">      <span class="keyword">try</span> &#123;   </span><br><span class="line">          conn.close();   </span><br><span class="line">      &#125;<span class="keyword">catch</span> ( SQLException sqlex ) &#123;  </span><br><span class="line">          System.err.println( <span class="string">"不能连接数据库！"</span> );  </span><br><span class="line">          sqlex.printStackTrace();  </span><br><span class="line">      &#125;  </span><br><span class="line">  &#125;   </span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">( String args[] )</span></span>&#123;  </span><br><span class="line">        </span><br><span class="line">      <span class="keyword">final</span> InnerShow app = <span class="keyword">new</span> InnerShow();   </span><br><span class="line">      </span><br><span class="line">      <span class="comment">//设置关闭窗口时的事件</span></span><br><span class="line">      app.addWindowListener( <span class="keyword">new</span> WindowAdapter() &#123;  </span><br><span class="line">          <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">windowClosing</span><span class="params">( WindowEvent e )</span></span>&#123;  </span><br><span class="line">              app.shutDown();  </span><br><span class="line">              System.exit( <span class="number">0</span> );   </span><br><span class="line">          &#125;  </span><br><span class="line">      &#125;);  </span><br><span class="line">  &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/00049204191994f8ff327aea4c16e83b.png" alt="12.png"></p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/05f84f710bc4a1c016cafd241f832279.png" alt="13.png"></p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/782545109c61acbeac236355b62ad443.png" alt="14.png"></p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/96834750a169cb5bd586fc603eb3e248.png" alt="15.png"></p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/90c2ddeb30fd9903aad7c979d814125d.png" alt="16.png"></p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/ebf3274ac71507980ca19705a49134d9.png" alt="17.png"></p>
<p>此时的数据库中的学生信息表如下：</p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/d6e5411193bf2f0cf58790b230b171e1.png" alt="18.png"></p>
<ul>
<li>设计思路<ul>
<li>继承JFrame类，属于屏幕上window的对象<ul>
<li>定义Statement对象、定义结果集、定义GUI变量</li>
<li>初始化<ul>
<li>加载驱动程序连接数据库</li>
<li>如果连接建立成功则建立GUI，对于设置的两个Button设置监听器<ul>
<li>设置按钮事件<ul>
<li>查询按钮按下以后会调用<code>getTable()</code>方法</li>
<li>注册按钮按下以后会调用<code>setTable()</code>方法</li>
</ul>
</li>
<li>组件布局<ul>
<li>查询部分的组件使用<code>BorderLayout()</code>，注册部分的文本框使用<code>FlowLayout()</code></li>
<li>总体为<code>Container</code>，设置窗口默认大小</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>定义<code>getTable()</code>方法<ul>
<li>根据输入的人名构造SQL语句，执行SQL语句，在表格中显示结果（即调用<code>displayResultSet</code>方法）<ul>
<li>定义<code>displayResultSet</code>方法<ul>
<li>通过创建新的<code>vetor</code>向量类来存储获取的元数据，即列名和行数</li>
<li>使用循环获得列名、调用<code>getNewxRow</code>方法获取所有记录</li>
<li>在表格中显示（利用<code>JTable</code>）</li>
</ul>
</li>
<li>定义<code>getNextRow</code>方法<ul>
<li>创建<code>vetor</code>类存储获取的数据</li>
<li>使用<code>for</code>循环获取一行的记录</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>定义<code>setTable()</code>方法<ul>
<li>获取文本框输入的数据</li>
<li>构造合适的SQL语句，将数据插入到数据库中</li>
<li>设置判断，如果人名重复则报错，没有重复则成功写入并提示</li>
</ul>
</li>
<li>设置<code>shutDown()</code>方法<ul>
<li>断开数据库连接，直接使用<code>close()</code>方法</li>
</ul>
</li>
<li>主函数<ul>
<li>创建<code>InnerShow</code>类的实例</li>
<li>设置关闭窗口时的事件<ul>
<li>关闭窗口时断开与数据库的链接，释放内存</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>首要的问题是如何将获取的数据显示在表格上<ul>
<li>通过google查到了实现的方法，其实没什么难的，就是一些模块自带的函数不熟悉</li>
</ul>
</li>
<li>第二个问题就是构造出了SQL语句但是没有结果<ul>
<li>直接在命令行输入SQL语句进行查询，发现是因为在查找和插入的时候，字符型的数据必须加上<code>&quot;</code>双引号，当然<code>&#39;</code>单引号也行。</li>
<li>用引号把字符型的数据括起来以后成功执行SQL语句</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="第六次上机"><a href="#第六次上机" class="headerlink" title="第六次上机"></a>第六次上机</h3><h4 id="6-2"><a href="#6-2" class="headerlink" title="6.2"></a>6.2</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>编写一个程序，启动1000个线程，每个线程给初始值为0的变量sum加1。定义一个Integer包装对象来保存sum。使用同步和不使用同步来运行这个程序，看看它们的效果。</p>
</blockquote>
</li>
<li><p>代码如下</p>
<ul>
<li>不使用同步</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange6;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MutableInteger</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> value = <span class="number">0</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">MutableInteger</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.value = a;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread_100</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> MutableInteger sum;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> threadNo;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Thread_100</span><span class="params">(MutableInteger sum, <span class="keyword">int</span> threadNo)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.sum = sum;</span><br><span class="line">		<span class="keyword">this</span>.threadNo = threadNo;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.sum.value += <span class="number">1</span>;</span><br><span class="line">		System.out.println(<span class="string">"Thread."</span> + threadNo + <span class="string">"executes from 0 to 1"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Integer sumInteger = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">int</span> threads = <span class="number">1000</span>;</span><br><span class="line">		</span><br><span class="line">		MutableInteger[] subSum = <span class="keyword">new</span> MutableInteger[threads];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; threads; i++) &#123;</span><br><span class="line">			subSum[i] = <span class="keyword">new</span> MutableInteger(<span class="number">0</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;threads; i++) &#123;</span><br><span class="line">			<span class="keyword">new</span> Thread(<span class="keyword">new</span> Thread_100(subSum[i],i)).start();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">10</span>);</span><br><span class="line">			</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;threads; i++) &#123;</span><br><span class="line">				sumInteger += subSum[i].value;</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println(<span class="string">"The sum is "</span> + sumInteger);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用同步</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//只要修改run()方法，因为只有它对sum进行了读写操作</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">			<span class="keyword">this</span>.sum.value += <span class="number">1</span>;</span><br><span class="line">			System.out.println(<span class="string">"Thread."</span> + threadNo + <span class="string">"executes from 0 to 1"</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>程序结果</p>
</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/2395fdb6af0f78d1de8f9901add660ca.png" alt="19.png"></p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/721511c72271b44667b5b8645b10797a.png" alt="20.png"></p>
<ul>
<li>设计思路<ul>
<li>定义简单的可变int类保存sum</li>
<li>定义多线程执行和加和操作的类<code>Thread_100</code><ul>
<li>初始化<ul>
<li>传入参数和第几线程数</li>
<li>定义<code>run()</code>方法<ul>
<li>每个线程都是<code>sum+1</code></li>
<li>打印出对应线程的执行结果</li>
</ul>
</li>
</ul>
</li>
<li>主函数<ul>
<li>定义线程总数</li>
<li>使用循环定义每个线程的初始值，保存在数组中，作为下一个循环传入的参数</li>
<li>使用循环每个线程计算sum</li>
<li>使用循环将各个线程的sum相加求和</li>
<li>打印出结果</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>无</li>
<li>但是这个程序没有体现出<code>synchronized</code>的作用，但是同步的作用在于<ul>
<li>在本例中我选择的是修饰方法，但是google以后得知同步方法可能造成数据混乱</li>
<li>将方法<code>run()</code>声明为synchronized，由于在线程的整个生命期内它一直在运行，因此将导致它对本类任何synchronized方法的调用都永远不会成功。所以synchronized代码块是一个更好的解决办法</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="6-3"><a href="#6-3" class="headerlink" title="6.3"></a>6.3</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>编写一个程序，分别使用并行方法和顺序方法实现两个2000*2000的矩阵加法计算。</p>
</blockquote>
</li>
<li><p>代码如下</p>
<ul>
<li>顺序执行</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Matrix</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> row = <span class="number">2000</span>;</span><br><span class="line">		<span class="keyword">int</span> column = <span class="number">2000</span>;</span><br><span class="line">		<span class="keyword">int</span>[][] matrix1 = create_Matrix(row, column);</span><br><span class="line">		show(matrix1);</span><br><span class="line">		System.out.println();</span><br><span class="line">		<span class="keyword">int</span>[][] matrix2 = create_Matrix(row, column);</span><br><span class="line">		show(matrix2);</span><br><span class="line">		System.out.println();</span><br><span class="line">		<span class="keyword">int</span>[][] matrixResult = calculate(matrix1, matrix2);</span><br><span class="line">		show(matrixResult);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//生成一个自定义行数和列数的矩阵</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] create_Matrix(<span class="keyword">int</span> row_number, <span class="keyword">int</span> column_number) &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">int</span> martrixA[][] = <span class="keyword">new</span> <span class="keyword">int</span>[row_number][column_number];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;row_number; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;column_number; j++) &#123;</span><br><span class="line">				martrixA[i][j] = random_number();</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> martrixA;	</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//产生一个1~50的随机整数</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">random_number</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">int</span> number;</span><br><span class="line">		Random random = <span class="keyword">new</span> Random();</span><br><span class="line">		number = random.nextInt(<span class="number">50</span>) + <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">return</span> number;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//两个矩阵相加</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span>[][] calculate(<span class="keyword">int</span> matrixA[][], <span class="keyword">int</span> matrixB[][]) &#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">int</span> matrix[][] = <span class="keyword">new</span> <span class="keyword">int</span>[matrixA.length][matrixA[<span class="number">0</span>].length];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;matrixA.length; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;matrixA[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">				matrix[i][j] = matrixA[i][j] + matrixB[i][j];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> matrix;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//打印出矩阵中的元素</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(<span class="keyword">int</span> matrix[][])</span> </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;matrix.length; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;matrix[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">				System.out.print(matrix[i][j] + <span class="string">" "</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">		</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>​    并行执行—使用<code>Fork/Join</code>框架失败</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ForkJoinPool;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.RecursiveTask;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ForkJoinPoolTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		ForkJoinPool forkJoinPool = <span class="keyword">new</span> ForkJoinPool(<span class="number">4</span>);</span><br><span class="line">		</span><br><span class="line">		parallelTask tesTask = <span class="keyword">new</span> parallelTask(<span class="number">2000</span>, <span class="number">2000</span>);</span><br><span class="line">		Integer[][] resultIntegers = forkJoinPool.invoke(tesTask);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;resultIntegers.length; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;resultIntegers[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">				System.out.print(resultIntegers[i][j] + <span class="string">" "</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class parallelTask extends RecursiveTask&lt;Integer[][]&gt; &#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> row_number;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> column_number;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">parallelTask</span><span class="params">(<span class="keyword">int</span> row_number, <span class="keyword">int</span> column_number)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.row_number = row_number;</span><br><span class="line">		<span class="keyword">this</span>.column_number = column_number;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">protected</span> Integer[][] compute() &#123;</span><br><span class="line">		Integer[][] martrixA = <span class="keyword">new</span> Integer[row_number][column_number];</span><br><span class="line">		Integer[][] martrixB = <span class="keyword">new</span> Integer[row_number][column_number];</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;row_number; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;column_number; j++) &#123;</span><br><span class="line">				martrixA[i][j] = random_number();</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		parallelTask oneTask = <span class="keyword">new</span> parallelTask(<span class="number">2000</span>, <span class="number">2000</span>);</span><br><span class="line">		parallelTask twoTask = <span class="keyword">new</span> parallelTask(<span class="number">2000</span>, <span class="number">2000</span>);</span><br><span class="line">		</span><br><span class="line">		oneTask.fork();</span><br><span class="line">		twoTask.fork();</span><br><span class="line">		</span><br><span class="line">		Integer[][] oneResult = oneTask.join();</span><br><span class="line">		Integer[][] twoResult = twoTask.join();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;row_number; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;column_number; j++) &#123;</span><br><span class="line">				martrixB[i][j] = oneResult[i][j] + twoResult[i][j];</span><br><span class="line">				</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> martrixB;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">random_number</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> number;</span><br><span class="line">		Random random = <span class="keyword">new</span> Random();</span><br><span class="line">		number = random.nextInt(<span class="number">50</span>) + <span class="number">1</span>;</span><br><span class="line">		<span class="keyword">return</span> number;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>​    并行执行—使用多线程（实现<code>Runnable</code>接口）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange6;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Thread2</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">int</span> leng = <span class="number">20</span>;</span><br><span class="line">		<span class="keyword">long</span> startTime,endTime;</span><br><span class="line">		<span class="keyword">int</span> a[][] = <span class="keyword">new</span> <span class="keyword">int</span>[leng][leng];</span><br><span class="line">		<span class="keyword">int</span> b[][] = <span class="keyword">new</span> <span class="keyword">int</span>[leng][leng];</span><br><span class="line">		<span class="keyword">int</span> c[][] = <span class="keyword">new</span> <span class="keyword">int</span>[leng][leng];</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i&lt;leng; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">0</span>; j&lt;leng; j++) &#123;</span><br><span class="line">				a[i][j] = <span class="keyword">new</span> Random().nextInt(<span class="number">50</span>) + <span class="number">1</span>;</span><br><span class="line">				b[i][j] = <span class="keyword">new</span> Random().nextInt(<span class="number">50</span>) + <span class="number">1</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		Matrix2 matrixone = <span class="keyword">new</span> Matrix2(a, b, <span class="number">0</span>, leng);</span><br><span class="line">		Matrix2 matrixtwo = <span class="keyword">new</span> Matrix2(a, b, <span class="number">1</span>, leng);</span><br><span class="line">		Thread threadone = <span class="keyword">new</span> Thread(matrixone);</span><br><span class="line">		Thread threadtwo = <span class="keyword">new</span> Thread(matrixtwo);</span><br><span class="line">		</span><br><span class="line">		startTime = System.currentTimeMillis();</span><br><span class="line">		threadone.start();</span><br><span class="line">		threadtwo.start();</span><br><span class="line">		threadone.join();</span><br><span class="line">		threadtwo.join();</span><br><span class="line">		</span><br><span class="line">		endTime = System.currentTimeMillis();</span><br><span class="line">		System.out.println(<span class="string">"并行结果如下："</span>);</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;leng; i++) &#123;</span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>; j&lt;leng; j++) &#123;</span><br><span class="line">				c[i][j] = matrixone.getResult()[i][j] + matrixtwo.getResult()[i][j];</span><br><span class="line">				System.out.print(c[i][j] + <span class="string">" "</span>);</span><br><span class="line">			&#125;</span><br><span class="line">			System.out.println();</span><br><span class="line">		&#125;	</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">"并行时间 = "</span> + (endTime - startTime));</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Matrix2</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> A[][];</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> B[][];</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> C[][];</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> start;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> end;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Matrix2</span><span class="params">(<span class="keyword">int</span> a[][], <span class="keyword">int</span> b[][], <span class="keyword">int</span> st, <span class="keyword">int</span> en)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.A = a;</span><br><span class="line">		<span class="keyword">this</span>.B = b;</span><br><span class="line">		<span class="keyword">this</span>.C = <span class="keyword">new</span> <span class="keyword">int</span>[en][en];</span><br><span class="line">		<span class="keyword">this</span>.start = st;</span><br><span class="line">		<span class="keyword">this</span>.end = en;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">int</span> i, j;</span><br><span class="line">		<span class="keyword">for</span>(i=start; i&lt;end; i+=<span class="number">2</span>) &#123;</span><br><span class="line">			<span class="keyword">for</span>(j=<span class="number">0</span>; j&lt;end; j++) &#123;</span><br><span class="line">				C[i][j] = A[i][j] + B[i][j];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;	</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">int</span>[][] getResult() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.C;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>程序结果</p>
<ul>
<li>顺序执行</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/64c408212082cb62cd74d5d2001812a2.png" alt="21.png"></p>
<p>完全没必要2000呀，就一直在跑</p>
<ul>
<li>并行执行—<code>Fork/Join</code>框架<ul>
<li>电脑直接炸了CPU直接跑满，结果都没有出来</li>
<li><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/d85eba62f0abbb088c85fefd1994b2fd.png" alt="22.png"></li>
<li>应该是程序有问题，但是电脑确实炸了</li>
</ul>
</li>
<li>并行执行—使用多线程（实现<code>Runnable</code>接口）<ul>
<li>这里的话2000太多了，就设了个20*20的矩阵相加</li>
</ul>
</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/14/57bb7de9f78b1f1231d01e167c49201f.png" alt="1.png"></p>
</li>
<li><p>设计思路</p>
<ul>
<li><p>顺序执行</p>
<ul>
<li>初始化两个矩阵，利用生成随机数构造矩阵</li>
<li>内外循环相加两个矩阵</li>
</ul>
</li>
<li><p>并行—<code>Fork/Join</code>框架</p>
<ul>
<li><code>ForkJoinPool</code>可以满足并行地实现分治算法</li>
<li><code>invoke</code>方法用来执行一个带返回值的任务（通常继承自<code>RecursiveTask</code>），并且该方法是阻塞的，直到任务执行完毕，该方法才会停止阻塞并返回任务的执行结果</li>
<li><code>ForkJoinPool</code> 和 <code>ThreadPoolExecutor</code> 都是 <code>ExecutorService</code>（线程池），但<code>ForkJoinPool</code> 的独特点在于：</li>
</ul>
<ol>
<li><code>ThreadPoolExecutor</code> 只能执行 <code>Runnable</code> 和 <code>Callable</code> 任务，而 <code>ForkJoinPool</code> 不仅可以执行 <code>Runnable</code> 和 <code>Callable</code> 任务，还可以执行 Fork/Join 型任务 —— <code>ForkJoinTask</code> —— 从而满足并行地实现分治算法的需要；</li>
<li><code>ThreadPoolExecutor</code> 中任务的执行顺序是按照其在共享队列中的顺序来执行的，所以后面的任务需要等待前面任务执行完毕后才能执行，而 <code>ForkJoinPool</code> 每个线程有自己的任务队列，并在此基础上实现了 Work-Stealing 的功能，使得在某些情况下 <code>ForkJoinPool</code> 能更大程度的提高并发效率。</li>
</ol>
</li>
<li><p>并行—使用多线程（实现<code>Runnable</code>接口）</p>
<ul>
<li>初试化线程，传入两个已经生成的矩阵<ul>
<li>通过两个起始位置的不同，一个线程负责统计奇数行的和，另一个线程负责统计偶数行的和</li>
<li>但是这么做的问题是效率不够高，这是为两个线程准备的算法，如果换成三线程四线程也可以实现，应该设置一个总的线程数，然后通过取余数的方法判断，然后建立不同的线程同时计算，最后将结果相加</li>
</ul>
</li>
<li>主函数<ul>
<li>生成两个矩阵</li>
<li>建立两个线程</li>
<li>通过调用<code>Matrix2</code>中的<code>getResult()</code>方法获得各个线程的结果</li>
<li>将结果相加并统计运行时间</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>遇到的问题</p>
<ul>
<li><code>Fork/Join</code>框架实现的这一想法还是没有做出来</li>
<li>多线程严格意义上来说并不一定是并发<ul>
<li>如果系统有足够的闲置运行内存空间，那么这时多线程确实是并行；如果系统资源紧张，那么也有可能是并发。</li>
</ul>
</li>
<li>通过这一题对于并发和并行、多线程的实现有了更深刻的了解</li>
</ul>
</li>
</ul>
<h3 id="第七次上机"><a href="#第七次上机" class="headerlink" title="第七次上机"></a>第七次上机</h3><h4 id="7-1"><a href="#7-1" class="headerlink" title="7.1"></a>7.1</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>编写一个程序，分别使用文本I/O和二进制I/O向文件exercise.txt和文件exercise2.dat中以追加的方式写入100个的随机整数，（若文件不存在，则先创建），文本文件中的整数用空格隔开，最后将文件中的100个整数读取出来并打印到控制台。</p>
</blockquote>
</li>
<li><p>代码如下</p>
<ul>
<li>文本I/O</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange7;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileStream</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">		</span><br><span class="line">		File f1 = <span class="keyword">new</span> File(<span class="string">"exercise.txt"</span>);</span><br><span class="line">        FileOutputStream fop = <span class="keyword">new</span> FileOutputStream(f1,<span class="keyword">true</span>);</span><br><span class="line"> </span><br><span class="line">        OutputStreamWriter writer = <span class="keyword">new</span> OutputStreamWriter(fop, <span class="string">"UTF-8"</span>);</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>;i&lt;<span class="number">100</span>;i++) &#123;</span><br><span class="line">        	<span class="keyword">int</span> number;</span><br><span class="line">        	Random rm = <span class="keyword">new</span> Random();</span><br><span class="line">        	number = rm.nextInt(<span class="number">8</span>) + <span class="number">1</span>;</span><br><span class="line">        	<span class="keyword">char</span> ch = (<span class="keyword">char</span>) (number + <span class="string">'0'</span>);</span><br><span class="line">        	writer.append(ch);</span><br><span class="line">        	writer.append(<span class="string">' '</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        writer.append(<span class="string">"\r\n"</span>);</span><br><span class="line"> </span><br><span class="line">        writer.close(); </span><br><span class="line">        fop.close();</span><br><span class="line">        FileInputStream fip = <span class="keyword">new</span> FileInputStream(f1);</span><br><span class="line"></span><br><span class="line">        InputStreamReader reader = <span class="keyword">new</span> InputStreamReader(fip, <span class="string">"UTF-8"</span>);</span><br><span class="line"> </span><br><span class="line">        StringBuffer sb = <span class="keyword">new</span> StringBuffer();</span><br><span class="line">        <span class="keyword">while</span> (reader.ready()) &#123;</span><br><span class="line">            sb.append((<span class="keyword">char</span>) reader.read());</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(sb.toString());</span><br><span class="line">        reader.close();</span><br><span class="line">        fip.close();	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>二进制I/O<ul>
<li>修改一开始设置的文件名</li>
<li>去除编码规定</li>
</ul>
</li>
</ul>
</li>
<li><p>程序结果</p>
</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/65c1fa92103458d9ec68563a855be81b.png" alt="23.png"></p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/719ba686a5e5ba5cba5dac22f33a0c90.png" alt="24.png"></p>
<p>再次运行</p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/d1cf8d5e4fef5f23f54f213de48e9112.png" alt="25.png"></p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/97191f08ff97c8d7a74c152ff5b7d34e.png" alt="26.png"></p>
<ul>
<li>设计思路<ul>
<li>菜鸟教程大法好，参考菜鸟教程</li>
<li>追加：<code>FileOutputStream fop = new FileOutputStream(f,true);</code>加上这个<code>true</code>之后便会追加</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>唯一的问题就是整型数据如何写入，因为写入的时候是以字符串写入的，如果没有进行转换的话会默认把数字当成字符的ASCII编码来处理，这时会产生乱码<ul>
<li>解决：<code>(char)(num + &#39;0&#39;)</code></li>
</ul>
</li>
<li>没有确定编码形式也会出现乱码<ul>
<li>解决：使用<code>UTF-8编码</code></li>
</ul>
</li>
<li>产生的随机数范围太大也会产生乱码<ul>
<li>解决：减少随机数生成大小的范围</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="7-3"><a href="#7-3" class="headerlink" title="7.3"></a>7.3</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>设计一个类，使其实现Serializable接口，编写程序创建5个该类对象，并将它们存储在exercise3.dat文件中，最后将其从文件中读出并打印到控制台。</p>
</blockquote>
</li>
<li><p>代码如下</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange7;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SerializableTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		Employee employee1 = <span class="keyword">new</span> Employee(<span class="string">"Klaus"</span>, <span class="number">5000</span>);</span><br><span class="line">		Employee employee2 = <span class="keyword">new</span> Employee(<span class="string">"Snow"</span>, <span class="number">6000</span>);</span><br><span class="line">		Employee employee3 = <span class="keyword">new</span> Employee(<span class="string">"John"</span>, <span class="number">3000</span>);</span><br><span class="line">		Employee employee4 = <span class="keyword">new</span> Employee(<span class="string">"Jess"</span>, <span class="number">5400</span>);</span><br><span class="line">		Employee employee5 = <span class="keyword">new</span> Employee(<span class="string">"Ed"</span>, <span class="number">10000</span>);</span><br><span class="line">		Manager manager = <span class="keyword">new</span> Manager(<span class="string">"Nina"</span>, <span class="number">8800</span>);</span><br><span class="line">		manager.setSecretary(employee5);</span><br><span class="line">		</span><br><span class="line">		Employee[] staff = <span class="keyword">new</span> Employee[<span class="number">6</span>];</span><br><span class="line">		  staff[<span class="number">0</span>] = employee1;</span><br><span class="line">		  staff[<span class="number">1</span>] = employee2;</span><br><span class="line">		  staff[<span class="number">2</span>] = employee3;</span><br><span class="line">		  staff[<span class="number">3</span>] = employee4;</span><br><span class="line">		  staff[<span class="number">4</span>] = employee5;</span><br><span class="line">		  staff[<span class="number">5</span>] = manager;</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			   ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"exercise3.dat"</span>));</span><br><span class="line">			   oos.writeObject(staff);</span><br><span class="line">			   oos.close();</span><br><span class="line">			   </span><br><span class="line">			   ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"exercise3.dat"</span>));</span><br><span class="line">			   Employee[] newStaff = (Employee[])ois.readObject();</span><br><span class="line">			   ois.close();</span><br><span class="line">			   </span><br><span class="line">			   <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;newStaff.length; i++)</span><br><span class="line">			    System.out.println(newStaff[i]);</span><br><span class="line">			   </span><br><span class="line">			  &#125;<span class="keyword">catch</span>(Exception e)</span><br><span class="line">			  &#123;</span><br><span class="line">			   e.printStackTrace();</span><br><span class="line">			  &#125;</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> salary;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Employee</span><span class="params">(String name,<span class="keyword">double</span> salary)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.salary = salary;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	 <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		  <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">		  <span class="keyword">return</span> getClass().getName() + </span><br><span class="line">		   <span class="string">"[ Name = "</span> + name + <span class="string">", salary = "</span> + salary +<span class="string">"]"</span>;</span><br><span class="line">		 &#125;</span><br><span class="line">	 </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Manager</span> <span class="keyword">extends</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> Employee secretary;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">Manager</span><span class="params">(String name,<span class="keyword">double</span> salary)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>(name, salary);</span><br><span class="line">		secretary = <span class="keyword">null</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Employee <span class="title">getSecretary</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> secretary;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSecretary</span><span class="params">(Employee secretary)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.secretary = secretary;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	 <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		  <span class="keyword">return</span> <span class="keyword">super</span>.toString() + <span class="string">"[ secretary = "</span> + secretary +<span class="string">"]"</span>;</span><br><span class="line">	 &#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>程序结果</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/0981afd132e6a0fc79efdd23f2cd62fe.png" alt="27.png"></p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/196089b5f72d066fbc26f54d2cf00377.png" alt="28.png"></p>
<ul>
<li>设计思路<ul>
<li>定义<code>Employee</code>类，实现<code>Serializable</code>接口，标注这该对象是可被序列化的<ul>
<li>定义<code>toString()</code>方法，返回一个”以文本方式表示“此对象的字符串</li>
</ul>
</li>
<li>定义<code>Manager</code>类，继承<code>Employee</code>类，这时不用再写<code>implements</code><ul>
<li>定义<code>toString()</code>方法，返回一个”以文本方式表示“此对象的字符串</li>
</ul>
</li>
<li>主函数<ul>
<li>实例化5个<code>Employee</code>类，1个<code>Manager</code>类</li>
<li>使用一个输出流（如：<code>FileOutputStream</code>）来构造一个<code>ObjectOutputStream</code>（对象流）对象</li>
<li>使用<code>ObjectOutputStream</code>对象的<code>writeObject(Object)</code>方法就可以将对象的状态保存至指定的文件中</li>
<li>恢复的时候调用<code>ObjectInputStream</code>的<code>readObject()</code>方法<ul>
<li>使用循环打印出文件内容</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>无</li>
</ul>
</li>
</ul>
<h3 id="第八次上机"><a href="#第八次上机" class="headerlink" title="第八次上机"></a>第八次上机</h3><h4 id="8-2"><a href="#8-2" class="headerlink" title="8.2"></a>8.2</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>客户端通过输出流套接字的DataOutputStream发送半径，服务器通过输入流套接字的DataInputStream接收半径，计算圆的面积，最后返回给客户端进行显示，其中，一个服务器可以连接多个客户端，对每一个客户端的请求处理用线程来完成。</p>
</blockquote>
</li>
<li><p>代码如下</p>
<ul>
<li>服务器端</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JScrollPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextArea;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> JTextArea jta=<span class="keyword">new</span> JTextArea();</span><br><span class="line">    <span class="keyword">private</span> ExecutorService executor=Executors.newCachedThreadPool();</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Server();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Server</span><span class="params">()</span></span>&#123;</span><br><span class="line">        setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        add(<span class="keyword">new</span> JScrollPane(jta),BorderLayout.CENTER);</span><br><span class="line">        setTitle(<span class="string">"Server"</span>);</span><br><span class="line">        setSize(<span class="number">500</span>, <span class="number">300</span>);</span><br><span class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        setVisible(<span class="keyword">true</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            ServerSocket serverSocket=<span class="keyword">new</span> ServerSocket(<span class="number">8000</span>);</span><br><span class="line">            jta.append(<span class="string">"Server started at "</span>+<span class="keyword">new</span> Date()+<span class="string">'\n'</span>);</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                Socket socket=serverSocket.accept();</span><br><span class="line">                executor.execute(<span class="keyword">new</span> Task(socket));    <span class="comment">//对接收到的新的连接，启动一个新的线程</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException ex)&#123;</span><br><span class="line">            System.err.println(ex);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">finally</span>&#123;</span><br><span class="line">        executor.shutdown();</span><br><span class="line">    &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> Socket socket;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Task</span><span class="params">(Socket socket)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.socket=socket;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;  <span class="comment">//在线程中执行对客户端的应答</span></span><br><span class="line">            <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                DataInputStream inputFromClient=<span class="keyword">new</span> DataInputStream(socket.getInputStream());</span><br><span class="line">                DataOutputStream outputToClient=<span class="keyword">new</span> DataOutputStream(socket.getOutputStream());</span><br><span class="line">                <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                    <span class="keyword">double</span> radius=inputFromClient.readDouble();</span><br><span class="line">                    <span class="keyword">double</span> area=radius*radius*Math.PI;</span><br><span class="line">                    outputToClient.writeDouble(area);</span><br><span class="line">                    jta.append(<span class="string">"Radius = "</span> + radius + <span class="string">"\n"</span>);</span><br><span class="line">                    jta.append(<span class="string">"Area =  "</span>+area+<span class="string">'\n'</span>);</span><br><span class="line">                    jta.append(<span class="string">"----From client ["</span>+socket.getInetAddress()+<span class="string">":"</span>+socket.getPort()+<span class="string">"] "</span> + <span class="string">"\n"</span>);</span><br><span class="line">                    jta.append(<span class="string">"\n"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span>(IOException ex)&#123;</span><br><span class="line">                System.err.println(ex);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>客户端</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.io.DataInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.DataOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JScrollPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextArea;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> JTextField jtf=<span class="keyword">new</span> JTextField();</span><br><span class="line">    <span class="keyword">private</span> JTextArea jta=<span class="keyword">new</span> JTextArea();</span><br><span class="line">    <span class="keyword">private</span> DataOutputStream toServer;</span><br><span class="line">    <span class="keyword">private</span> DataInputStream fromServer;</span><br><span class="line">    <span class="keyword">private</span> Socket socket;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Client();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Client</span><span class="params">()</span></span>&#123;</span><br><span class="line">        JPanel panel=<span class="keyword">new</span> JPanel();</span><br><span class="line">        panel.setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        panel.add(<span class="keyword">new</span> JLabel(<span class="string">"Enter radius"</span>),BorderLayout.WEST);</span><br><span class="line">        panel.add(jtf, BorderLayout.CENTER);</span><br><span class="line">        jtf.setHorizontalAlignment(JTextField.RIGHT);</span><br><span class="line">        setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        add(panel,BorderLayout.NORTH);</span><br><span class="line">        add(<span class="keyword">new</span> JScrollPane(jta), BorderLayout.CENTER);</span><br><span class="line">        jtf.addActionListener(<span class="keyword">new</span> TextFieldListener());</span><br><span class="line">        setTitle(<span class="string">"Client"</span>);</span><br><span class="line">        setSize(<span class="number">500</span>, <span class="number">300</span>);</span><br><span class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        setVisible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            socket=<span class="keyword">new</span> Socket(<span class="string">"localhost"</span>,<span class="number">8000</span>);</span><br><span class="line">            fromServer=<span class="keyword">new</span> DataInputStream(socket.getInputStream());</span><br><span class="line">            toServer=<span class="keyword">new</span> DataOutputStream(socket.getOutputStream());</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException ex)&#123;</span><br><span class="line">            jta.append(ex.toString()+<span class="string">'\n'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">TextFieldListener</span> <span class="keyword">implements</span> <span class="title">ActionListener</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">            <span class="comment">// TODO Auto-generated method stub</span></span><br><span class="line">            <span class="keyword">try</span>&#123;</span><br><span class="line">                <span class="keyword">double</span> radius=Double.parseDouble(jtf.getText().trim());</span><br><span class="line">                toServer.writeDouble(radius);</span><br><span class="line">                toServer.flush();</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">double</span> area=fromServer.readDouble();</span><br><span class="line">                jta.append(<span class="string">"Radius = "</span>+radius+<span class="string">'\n'</span>);</span><br><span class="line">                jta.append(<span class="string">"Area = "</span>+area+<span class="string">'\n'</span>);</span><br><span class="line">                jta.append(<span class="string">"----From server ["</span>+socket.getInetAddress()+<span class="string">":"</span>+socket.getPort()+<span class="string">"]  "</span>+<span class="string">'\n'</span>);</span><br><span class="line">                jta.append(<span class="string">"\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span>(IOException ex)&#123;</span><br><span class="line">                System.err.println(ex);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>程序结果</p>
</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/37d2bd665c68a1e656c01832c6fd1c6b.png" alt="29.png"></p>
<ul>
<li>设计思路<ul>
<li>服务器端<ul>
<li>设计GUI界面，因为之前有这样的练习，所以做起来也挺简单的</li>
<li>初始化<code>Server</code>类<ul>
<li>建立Socket连接，调用<code>java.net.socket</code>模块</li>
<li>默认本地连接<ul>
<li>改进：添加一个文本框接受用户输入ip地址，然后实现连接，但是这个没有写了。关于Socket连接之前用Python实现过，原理都是一样的。</li>
</ul>
</li>
<li>考虑多线程，实现一个服务器接收多个客户端的信息<ul>
<li>一直监听8000端口，如果有新的连接就启动一个新线程</li>
<li>通过实现Runnable接口来实现多线程<ul>
<li>通过输入流套接字的<code>DataInputStream</code>接收半径，计算圆的面积</li>
<li>将最终的信息显示在<code>TextArea</code>中</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>客户端<ul>
<li>设计GUI界面</li>
<li>建立Socket连接</li>
<li>在输入半径的文本框中设置监听器<ul>
<li>定义监听事件<ul>
<li>将半径传给服务器端</li>
<li>从服务器端获取面积然后显示在客户端的界面中</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>遇到的问题<ul>
<li>查询了一下建立Socket连接的函数的运用</li>
<li>在服务器端和客户端传值的地方卡了一阵子，后面按题目要求来就传值成功</li>
</ul>
</li>
</ul>
<h4 id="8-3"><a href="#8-3" class="headerlink" title="8.3"></a>8.3</h4><ul>
<li><p>程序要求</p>
<blockquote>
<p>使用套接字流ObjectOutputStream和ObjectInputStream在客户端和服务器之间发送接收学生对象（姓名、学号、性别、年级、专业、住址），对象必须是可序列化的，考虑给客户端和服务器设计一个GUI界面。</p>
</blockquote>
</li>
<li><p>代码如下</p>
<ul>
<li>服务器端</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange8_2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.ServerSocket;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.ExecutorService;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.Executors;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JScrollPane;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextArea;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">	<span class="keyword">private</span> JTextArea jta=<span class="keyword">new</span> JTextArea();</span><br><span class="line">    <span class="keyword">private</span> ExecutorService executor=Executors.newCachedThreadPool();</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Server();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Server</span><span class="params">()</span></span>&#123;</span><br><span class="line">        setLayout(<span class="keyword">new</span> BorderLayout());</span><br><span class="line">        add(<span class="keyword">new</span> JScrollPane(jta),BorderLayout.CENTER);</span><br><span class="line">        setTitle(<span class="string">"Server"</span>);</span><br><span class="line">        setSize(<span class="number">600</span>, <span class="number">300</span>);</span><br><span class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        setVisible(<span class="keyword">true</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">			<span class="meta">@SuppressWarnings</span>(<span class="string">"resource"</span>)</span><br><span class="line">			ServerSocket serverSocket=<span class="keyword">new</span> ServerSocket(<span class="number">8000</span>);</span><br><span class="line">            jta.append(<span class="string">"Server started at "</span>+<span class="keyword">new</span> Date()+<span class="string">'\n'</span>);</span><br><span class="line">            <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">                Socket socket=serverSocket.accept();</span><br><span class="line">                executor.execute(<span class="keyword">new</span> Task(socket)); </span><br><span class="line">                <span class="comment">//invoke(socket);</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">catch</span>(IOException ex)&#123;</span><br><span class="line">            System.err.println(ex);</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">finally</span>&#123;</span><br><span class="line">        executor.shutdown();</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Task</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    	<span class="keyword">private</span> Socket socket;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Task</span><span class="params">(Socket socket)</span></span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.socket=socket;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        	<span class="keyword">try</span> &#123;</span><br><span class="line">        		ObjectInputStream is = <span class="keyword">new</span> ObjectInputStream(socket.getInputStream());</span><br><span class="line">        		</span><br><span class="line">        		</span><br><span class="line">        		<span class="keyword">while</span>(<span class="keyword">true</span>) &#123;</span><br><span class="line">        			Object obj = is.readObject();</span><br><span class="line">        			Student student = (Student) obj;</span><br><span class="line">        			jta.append(<span class="string">"姓名："</span> + student.getName()+ <span class="string">"--学号："</span> +student.getNumber()</span><br><span class="line">					 + <span class="string">"--性别："</span> + student.getGender() + <span class="string">"--年级："</span> + student.getGrade()</span><br><span class="line">					 + <span class="string">"--专业："</span> + student.getMajor() + <span class="string">"--住址："</span> + student.getAddress() + <span class="string">"\n"</span>);</span><br><span class="line">        			jta.append(<span class="string">"\n"</span>);</span><br><span class="line">        		&#125;	</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">				<span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">				System.out.println(e);</span><br><span class="line">			&#125;<span class="keyword">catch</span>(ClassNotFoundException ex) &#123;</span><br><span class="line">				System.out.println(ex);</span><br><span class="line">			&#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">    private void invoke(Socket socket) throws IOException &#123;</span></span><br><span class="line"><span class="comment">    	</span></span><br><span class="line"><span class="comment">    	new Thread(new Runnable() &#123;</span></span><br><span class="line"><span class="comment">			</span></span><br><span class="line"><span class="comment">			@Override</span></span><br><span class="line"><span class="comment">			public void run() &#123;</span></span><br><span class="line"><span class="comment">				ObjectInputStream is = null;</span></span><br><span class="line"><span class="comment">				</span></span><br><span class="line"><span class="comment">				try &#123;</span></span><br><span class="line"><span class="comment">					is = new ObjectInputStream(new BufferedInputStream(socket.getInputStream()));</span></span><br><span class="line"><span class="comment">					</span></span><br><span class="line"><span class="comment">					</span></span><br><span class="line"><span class="comment">					Object obj = is.readObject();</span></span><br><span class="line"><span class="comment">					Student student = (Student)obj;</span></span><br><span class="line"><span class="comment">					</span></span><br><span class="line"><span class="comment">					jta(student.getName()+ "--" +student.getNumber()</span></span><br><span class="line"><span class="comment">					 + "--" + student.getGender() + "--" + student.getGrade()</span></span><br><span class="line"><span class="comment">					 + "--" + student.getMajor() + "--" + student.getAddress());</span></span><br><span class="line"><span class="comment">					</span></span><br><span class="line"><span class="comment">					</span></span><br><span class="line"><span class="comment">				</span></span><br><span class="line"><span class="comment">				&#125; catch (IOException e) &#123;</span></span><br><span class="line"><span class="comment">					System.out.println(e);</span></span><br><span class="line"><span class="comment">				&#125;</span></span><br><span class="line"><span class="comment">				catch(ClassNotFoundException ex) &#123;</span></span><br><span class="line"><span class="comment">					System.out.println(ex);</span></span><br><span class="line"><span class="comment">				&#125;finally &#123;</span></span><br><span class="line"><span class="comment">					try &#123;</span></span><br><span class="line"><span class="comment">						is.close();</span></span><br><span class="line"><span class="comment">					&#125;catch(Exception ec) &#123;&#125;</span></span><br><span class="line"><span class="comment">					try &#123;</span></span><br><span class="line"><span class="comment">						socket.close();</span></span><br><span class="line"><span class="comment">					&#125;catch(Exception ef) &#123;&#125;</span></span><br><span class="line"><span class="comment">					</span></span><br><span class="line"><span class="comment">				&#125;</span></span><br><span class="line"><span class="comment">			&#125;</span></span><br><span class="line"><span class="comment">		&#125;).start();</span></span><br><span class="line"><span class="comment">   	</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>客户端</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> challange8_2;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.awt.BorderLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.Container;</span><br><span class="line"><span class="keyword">import</span> java.awt.FlowLayout;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionEvent;</span><br><span class="line"><span class="keyword">import</span> java.awt.event.ActionListener;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.net.Socket;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.swing.JButton;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JFrame;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JLabel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JPanel;</span><br><span class="line"><span class="keyword">import</span> javax.swing.JTextField;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> <span class="keyword">extends</span> <span class="title">JFrame</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">private</span> ObjectOutputStream os;</span><br><span class="line"></span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">	<span class="keyword">private</span> JLabel stu_name = <span class="keyword">new</span> JLabel(<span class="string">"姓名"</span>);</span><br><span class="line">    <span class="keyword">private</span> JTextField stu_inputName=<span class="keyword">new</span> JTextField(<span class="number">8</span>);</span><br><span class="line">    <span class="keyword">private</span> JLabel stu_number = <span class="keyword">new</span> JLabel(<span class="string">"学号"</span>);</span><br><span class="line">    <span class="keyword">private</span> JTextField stu_inputNumber=<span class="keyword">new</span> JTextField(<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">private</span> JLabel stu_gender = <span class="keyword">new</span> JLabel(<span class="string">"性别"</span>);</span><br><span class="line">    <span class="keyword">private</span> JTextField stu_inputGender=<span class="keyword">new</span> JTextField(<span class="number">8</span>);</span><br><span class="line">    <span class="keyword">private</span> JLabel stu_grade = <span class="keyword">new</span> JLabel(<span class="string">"年级"</span>);</span><br><span class="line">    <span class="keyword">private</span> JTextField stu_inputGrade=<span class="keyword">new</span> JTextField(<span class="number">8</span>);</span><br><span class="line">    <span class="keyword">private</span> JLabel stu_major = <span class="keyword">new</span> JLabel(<span class="string">"专业"</span>);</span><br><span class="line">    <span class="keyword">private</span> JTextField stu_inputMajor=<span class="keyword">new</span> JTextField(<span class="number">15</span>);</span><br><span class="line">    <span class="keyword">private</span> JLabel stu_address = <span class="keyword">new</span> JLabel(<span class="string">"住址"</span>);</span><br><span class="line">    <span class="keyword">private</span> JTextField stu_inputAddress=<span class="keyword">new</span> JTextField(<span class="number">15</span>);</span><br><span class="line">    <span class="keyword">private</span> JButton send = <span class="keyword">new</span> JButton(<span class="string">"发送"</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> Socket socket;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Client();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Client</span><span class="params">()</span></span>&#123;</span><br><span class="line">        JPanel inputPanel=<span class="keyword">new</span> JPanel();</span><br><span class="line">        inputPanel.setLayout(<span class="keyword">new</span> FlowLayout());</span><br><span class="line">        inputPanel.add(stu_name);</span><br><span class="line">        inputPanel.add(stu_inputName);</span><br><span class="line">        inputPanel.add(stu_number);</span><br><span class="line">        inputPanel.add(stu_inputNumber);</span><br><span class="line">        inputPanel.add(stu_gender);</span><br><span class="line">        inputPanel.add(stu_inputGender);</span><br><span class="line">        inputPanel.add(stu_grade);</span><br><span class="line">        inputPanel.add(stu_inputGrade);</span><br><span class="line">        inputPanel.add(stu_major);</span><br><span class="line">        inputPanel.add(stu_inputMajor);</span><br><span class="line">        inputPanel.add(stu_address);</span><br><span class="line">        inputPanel.add(stu_inputAddress);</span><br><span class="line">        </span><br><span class="line">        JPanel buttonPanel = <span class="keyword">new</span> JPanel();</span><br><span class="line">        buttonPanel.add(send);</span><br><span class="line">        </span><br><span class="line">        send.addActionListener( <span class="keyword">new</span> ButtonListener()); </span><br><span class="line">        </span><br><span class="line">        Container c = getContentPane();   </span><br><span class="line">        c.setLayout( <span class="keyword">new</span> BorderLayout() );   </span><br><span class="line">        </span><br><span class="line">        c.add(inputPanel,BorderLayout.NORTH);</span><br><span class="line">        c.add(buttonPanel,BorderLayout.CENTER);</span><br><span class="line">      </span><br><span class="line">        setTitle(<span class="string">"Client"</span>);</span><br><span class="line">        setSize(<span class="number">1200</span>, <span class="number">150</span>);</span><br><span class="line">        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span><br><span class="line">        show();</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">        	socket = <span class="keyword">new</span> Socket(<span class="string">"localhost"</span>,<span class="number">8000</span>);</span><br><span class="line">        	os = <span class="keyword">new</span> ObjectOutputStream(socket.getOutputStream());</span><br><span class="line"></span><br><span class="line">        	</span><br><span class="line">		&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">			<span class="comment">// <span class="doctag">TODO:</span> handle exception</span></span><br><span class="line">			System.out.println(e);</span><br><span class="line">		&#125;</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">ButtonListener</span> <span class="keyword">implements</span> <span class="title">ActionListener</span> </span>&#123;</span><br><span class="line">    	<span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</span><br><span class="line">    		<span class="keyword">try</span> &#123;</span><br><span class="line">    			String name = stu_inputName.getText();</span><br><span class="line">    			String number = stu_inputNumber.getText();</span><br><span class="line">    			String gender = stu_inputGender.getText();</span><br><span class="line">    			String grade = stu_inputGrade.getText();</span><br><span class="line">    			String major = stu_inputMajor.getText();</span><br><span class="line">    			String address = stu_inputAddress.getText();</span><br><span class="line">    			Student stu = <span class="keyword">new</span> Student(name, number, gender, grade, major, address);</span><br><span class="line">    			os.writeObject(stu);</span><br><span class="line">    			os.flush();	  <span class="comment">//刷新输出流</span></span><br><span class="line">                <span class="keyword">if</span>(os!=<span class="keyword">null</span>) &#123;</span><br><span class="line">    				JOptionPane.showMessageDialog(<span class="keyword">null</span>, <span class="string">"发送成功"</span>);</span><br><span class="line">    			&#125;</span><br><span class="line">                <span class="keyword">else</span> &#123;</span><br><span class="line">    				JOptionPane.showMessageDialog(<span class="keyword">null</span>, <span class="string">"发送失败"</span>);</span><br><span class="line">    			&#125;</span><br><span class="line">			&#125; <span class="keyword">catch</span> (IOException e2) &#123;</span><br><span class="line">				System.err.println(e2);</span><br><span class="line">			&#125;		</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>程序结果</p>
</li>
</ul>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/4066a0bf66af034c39a94e0e82908937.png" alt="30.png"></p>
<p><img src="http://klaus-1258823634.cos.ap-beijing.myqcloud.com/2019/06/09/c02b6a1aece8cfa06bdb37edd3a462d7.png" alt="31.png"></p>
<ul>
<li><p>设计思路</p>
<ul>
<li>这一次的任务和上一个题目类似，其实变的只是传输的是一个对象，所以传输流也变成了<code>ObjectInputStream</code>和<code>ObjectOutputStream</code></li>
<li>定义<code>Student</code>类，实现<code>Serializable</code>接口<ul>
<li>其中定义获取各个属性值的方法</li>
</ul>
</li>
<li>服务器端<ul>
<li>使用<code>Executor</code>构造缓存型线程池，实现多线程<ul>
<li>ExecutorService 的生命周期包括三种状态：运行、关闭、终止。创建后便进入运行状态，当调用了 shutdown（）方法时，便进入关闭状态，此时意味着 ExecutorService 不再接受新的任务，但它还在执行已经提交了的任务，当素有已经提交了的任务执行完后，便到达终止状态。如果不调用 shutdown（）方法，ExecutorService 会一直处在运行状态，不断接收新的任务，执行新的任务，服务器端一般不需要关闭它，保持一直运行即可。</li>
</ul>
</li>
<li>构建合适的GUI界面</li>
<li>建立Socket连接</li>
<li>接受客户端传来的序列化以后的输入流<code>ObjecctInputStream</code></li>
<li>读取对象，通过调用对象的方法将各个属性值打印在界面上</li>
</ul>
</li>
<li>客户端<ul>
<li>构建合适的GUI界面</li>
<li>建立Socket连接</li>
<li>获取文本框中输入的数据，使用<code>Student</code>类的构造方法实例化一个对象</li>
<li>将实例化的对象写入输出流<code>ObjectOutputStream</code></li>
<li>如果写入成功则提示发送成功，否则提示发送失败</li>
</ul>
</li>
</ul>
</li>
<li><p>遇到的问题</p>
<ul>
<li><p>因为有上一题的经验，所以问题不大，就是查询了下如何传输对象</p>
<ul>
<li>其中在服务器端试了注释中的方法，个人认为应该也是可行的，可是由于在方法中无法访问到类中的文本框，导致结果无法显示，还是有瑕疵。</li>
</ul>
</li>
<li><p>客户端中发送完一次数据之后便自动断开连接，为了保持连接，在客户端传送数据以后不能添加以下代码</p>
<ul>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">finally</span> &#123;</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						is.close();  </span><br><span class="line">					&#125;<span class="keyword">catch</span>(Exception ec) &#123;&#125;</span><br><span class="line">					<span class="keyword">try</span> &#123;</span><br><span class="line">						socket.close();</span><br><span class="line">					&#125;<span class="keyword">catch</span>(Exception ef) &#123;&#125;</span><br><span class="line">					</span><br><span class="line">				&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Java/" rel="tag"># Java</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/05/09/SQL-Injection/" rel="next" title="Web安全--SQL注入攻击">
                <i class="fa fa-chevron-left"></i> Web安全--SQL注入攻击
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/29/Web安全工程师成长之路——Web简介/" rel="prev" title="Web安全工程师之路————Web简介">
                Web安全工程师之路————Web简介 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Klaus</p>
              <div class="site-description motion-element" itemprop="description">Tough time don't last, tough people do.</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">28</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/KlausMichael0" title="GitHub &rarr; https://github.com/KlausMichael0" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#上机报告"><span class="nav-number">1.</span> <span class="nav-text">上机报告</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一次上机"><span class="nav-number">1.1.</span> <span class="nav-text">第一次上机</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.3</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-4"><span class="nav-number">1.1.2.</span> <span class="nav-text">1.4</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5"><span class="nav-number">1.1.3.</span> <span class="nav-text">1.5</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-7"><span class="nav-number">1.1.4.</span> <span class="nav-text">1.7</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第二次上机"><span class="nav-number">1.2.</span> <span class="nav-text">第二次上机</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3"><span class="nav-number">1.2.1.</span> <span class="nav-text">2.3</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.4</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第三次上机"><span class="nav-number">1.3.</span> <span class="nav-text">第三次上机</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1"><span class="nav-number">1.3.1.</span> <span class="nav-text">3.1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3"><span class="nav-number">1.3.2.</span> <span class="nav-text">3.3</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第四次上机"><span class="nav-number">1.4.</span> <span class="nav-text">第四次上机</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4-2"><span class="nav-number">1.4.1.</span> <span class="nav-text">4.2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-3"><span class="nav-number">1.4.2.</span> <span class="nav-text">4.3</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第五次上机"><span class="nav-number">1.5.</span> <span class="nav-text">第五次上机</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1"><span class="nav-number">1.5.1.</span> <span class="nav-text">5.1</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第六次上机"><span class="nav-number">1.6.</span> <span class="nav-text">第六次上机</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2"><span class="nav-number">1.6.1.</span> <span class="nav-text">6.2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-3"><span class="nav-number">1.6.2.</span> <span class="nav-text">6.3</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第七次上机"><span class="nav-number">1.7.</span> <span class="nav-text">第七次上机</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1"><span class="nav-number">1.7.1.</span> <span class="nav-text">7.1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-3"><span class="nav-number">1.7.2.</span> <span class="nav-text">7.3</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第八次上机"><span class="nav-number">1.8.</span> <span class="nav-text">第八次上机</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#8-2"><span class="nav-number">1.8.1.</span> <span class="nav-text">8.2</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-3"><span class="nav-number">1.8.2.</span> <span class="nav-text">8.3</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Klaus</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.0.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>













  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>



  
  <script src="/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
